!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,s){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function l(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function f(){return d("")}function m(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function h(t){return function(e){return e.preventDefault(),t.call(this,e)}}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?null:+t}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function v(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}function w(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function k(t){const e={};for(const n of t)e[n.name]=n.value;return e}let x;function _(t){x=t}function S(){if(!x)throw new Error("Function called outside component initialization");return x}function E(){const t=S();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const o=function(t,e,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,!1,e),s}(e,n);s.slice().forEach((e=>{e.call(t,o)}))}}}function M(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const N=[],R=[],C=[],j=[],z=Promise.resolve();let L=!1;function T(t){C.push(t)}function P(t){j.push(t)}let K=!1;const H=new Set;function O(){if(!K){K=!0;do{for(let t=0;t<N.length;t+=1){const e=N[t];_(e),A(e.$$)}for(_(null),N.length=0;R.length;)R.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];H.has(e)||(H.add(e),e())}C.length=0}while(N.length);for(;j.length;)j.pop()();L=!1,K=!1,H.clear()}}function A(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const D=new Set;let F,I;function Y(){F={r:0,c:[],p:F}}function q(){F.r||s(F.c),F=F.p}function B(t,e){t&&t.i&&(D.delete(t),t.i(e))}function U(t,e,n,s){if(t&&t.o){if(D.has(t))return;D.add(t),F.c.push((()=>{D.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function V(t,e){t.d(1),e.delete(t.key)}function X(t,e){U(t,1,1,(()=>{e.delete(t.key)}))}function G(t,e,n,s,o,r,i,l,c,a,u,d){let p=t.length,f=r.length,m=p;const h={};for(;m--;)h[t[m].key]=m;const b=[],g=new Map,$=new Map;for(m=f;m--;){const t=d(o,r,m),l=n(t);let c=i.get(l);c?s&&c.p(t,e):(c=a(l,t),c.c()),g.set(l,b[m]=c),l in h&&$.set(l,Math.abs(m-h[l]))}const y=new Set,v=new Set;function w(t){B(t,1),t.m(l,u),i.set(t.key,t),u=t.first,f--}for(;p&&f;){const e=b[f-1],n=t[p-1],s=e.key,o=n.key;e===n?(u=e.first,p--,f--):g.has(o)?!i.has(s)||y.has(s)?w(e):v.has(o)?p--:$.get(s)>$.get(o)?(v.add(s),w(e)):(y.add(o),p--):(c(n,i),p--)}for(;p--;){const e=t[p];g.has(e.key)||c(e,i)}for(;f;)w(b[f-1]);return b}function W(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function J(t){t&&t.c()}function Q(t,n,r,i){const{fragment:l,on_mount:c,on_destroy:a,after_update:u}=t.$$;l&&l.m(n,r),i||T((()=>{const n=c.map(e).filter(o);a?a.push(...n):s(n),t.$$.on_mount=[]})),u.forEach(T)}function Z(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function tt(t,e){-1===t.$$.dirty[0]&&(N.push(t),L||(L=!0,z.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function et(e,o,r,i,l,c,u,d=[-1]){const p=x;_(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||p.$$.root};u&&u(f.root);let m=!1;if(f.ctx=r?r(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),m&&tt(e,t)),n})):[],f.update(),m=!0,s(f.before_update),f.fragment=!!i&&i(f.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);f.fragment&&f.fragment.l(t),t.forEach(a)}else f.fragment&&f.fragment.c();o.intro&&B(e.$$.fragment),Q(e,o.target,o.anchor,o.customElement),O()}_(p)}var nt;"function"==typeof HTMLElement&&(I=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(o);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){Z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var st=new Uint8Array(16);function ot(){if(!nt&&!(nt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nt(st)}var rt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function it(t){return"string"==typeof t&&rt.test(t)}for(var lt,ct,at=[],ut=0;ut<256;++ut)at.push((ut+256).toString(16).substr(1));function dt(t,e,n){var s=(t=t||{}).random||(t.rng||ot)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=s[o];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(at[t[e+0]]+at[t[e+1]]+at[t[e+2]]+at[t[e+3]]+"-"+at[t[e+4]]+at[t[e+5]]+"-"+at[t[e+6]]+at[t[e+7]]+"-"+at[t[e+8]]+at[t[e+9]]+"-"+at[t[e+10]]+at[t[e+11]]+at[t[e+12]]+at[t[e+13]]+at[t[e+14]]+at[t[e+15]]).toLowerCase();if(!it(n))throw TypeError("Stringified UUID is invalid");return n}(s)}function pt(t){const e=+t;return"number"==typeof e&&!isNaN(e)&&e>=0&&e.toFixed(0)===e.toString()}class ft{constructor(t=dt(),e="worker_"+t.split("-")[0],n=0,s=0,o=100,r=!1,i=0,l=25,c=!0){this.id=t,this.name=e,this.node=n,this.cpu=s,this.diskSize=o,this.publicIp=r,this.memory=i,this.rootFsSize=l,this.plantery=c}get valid(){const{name:t,node:e,cpu:n,diskSize:s,memory:o,rootFsSize:r}=this;return""!==t&&pt(e)&&pt(n)&&pt(s)&&pt(o)&&pt(r)}}class mt extends ft{}class ht extends ft{}class bt{constructor(t="nw_"+dt().split("-")[0],e="10.20.0.0/16"){this.name=t,this.ipRange=e}get valid(){const{name:t,ipRange:e}=this;return""!==t&&""!==e}}class gt{constructor(t=dt(),e=new mt,n=[new ht],s=new bt,o="k8s_"+t.split("-")[0],r="",i="",l="",c=""){this.id=t,this.master=e,this.workers=n,this.network=s,this.name=o,this.secret=r,this.sshKey=i,this.metadata=l,this.description=c}get valid(){const{secret:t,sshKey:e,master:n,workers:s,network:o}=this;return""!==t&&""!==e&&n.valid&&o.valid&&s.reduce(((t,e)=>t&&e.valid),!0)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */const{NetworkModel:$t}=null!==(ct=null===(lt=window.configs)||void 0===lt?void 0:lt.grid3_client)&&void 0!==ct?ct:{};var yt,vt,wt,kt;const{HTTPMessageBusClient:xt}=null!==(vt=null===(yt=window.configs)||void 0===yt?void 0:yt.client)&&void 0!==vt?vt:{},{GridClient:_t,K8SModel:St,KubernetesNodeModel:Et}=null!==(kt=null===(wt=window.configs)||void 0===wt?void 0:wt.grid3_client)&&void 0!==kt?kt:{};async function Mt(t,e){const{master:n,workers:s,network:o}=t,r=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]])}return n}(t,["master","workers","network"]),{secret:i,sshKey:l,description:c,metadata:a,name:u}=r,{mnemonics:d,storeSecret:p,networkEnv:f}=e,m=new xt(0,""),h=new _t(f,d,p,m,void 0,"tfkvstore"),b=[Nt(n)],g=s.map(Nt),$=new St;return $.name=u,$.secret=i,$.network=function(t){const e=new $t;return e.name=t.name,e.ip_range=t.ipRange,e}(o),$.masters=b,$.workers=g,$.metadata=a,$.description=c,$.ssh_key=l,h.connect().then((()=>h.k8s.deploy($)))}function Nt(t){const e=new Et;return e.name=t.name,e.node_id=t.node,e.cpu=t.cpu,e.disk_size=t.diskSize,e.memory=t.memory,e.public_ip=t.publicIp,e.rootfs_size=t.rootFsSize,e.planetary=t.plantery,e}function Rt(t,e,n){const s=t.slice();return s[16]=e[n],s}function Ct(t){let e,n;function s(t,n){return null==e&&(e=!!t[3]()),e?Lt:"checkbox"===t[1].type?zt:"select"===t[1].type?jt:void 0}let o=s(t),r=o&&o(t);return{c(){r&&r.c(),n=f()},m(t,e){r&&r.m(t,e),c(t,n,e)},p(t,e){o===(o=s(t))&&r?r.p(t,e):(r&&r.d(1),r=o&&o(t),r&&(r.c(),r.m(n.parentNode,n)))},d(t){r&&r.d(t),t&&a(n)}}}function jt(t){let e,n,o,r,i,d=[],f=new Map,h=t[1].label&&Tt(t),g=t[1].options;const $=t=>t[16].value;for(let e=0;e<g.length;e+=1){let n=Rt(t,g,e),s=$(n);f.set(s,d[e]=Pt(s,n))}return{c(){h&&h.c(),e=p(),n=u("div"),o=u("select");for(let t=0;t<d.length;t+=1)d[t].c();void 0===t[0][t[1].symbol]&&T((()=>t[15].call(o))),b(n,"class","select mb-2"),b(n,"id",t[2])},m(s,a){h&&h.m(s,a),c(s,e,a),c(s,n,a),l(n,o);for(let t=0;t<d.length;t+=1)d[t].m(o,null);w(o,t[0][t[1].symbol]),r||(i=[m(o,"change",t[9]),m(o,"change",t[15])],r=!0)},p(t,n){t[1].label?h?h.p(t,n):(h=Tt(t),h.c(),h.m(e.parentNode,e)):h&&(h.d(1),h=null),2&n&&(g=t[1].options,d=G(d,n,$,1,t,g,f,o,V,Pt,null,Rt)),3&n&&w(o,t[0][t[1].symbol])},d(t){h&&h.d(t),t&&a(e),t&&a(n);for(let t=0;t<d.length;t+=1)d[t].d();r=!1,s(i)}}}function zt(t){let e,n,o,r,i,f,h,g,y,w,k=t[1].label+"";return{c(){e=u("div"),n=u("label"),o=u("input"),r=p(),i=u("span"),f=p(),h=u("label"),g=d(k),b(o,"type","checkbox"),b(o,"id",t[2]),b(i,"class","slider"),b(n,"class","switch"),b(h,"for",t[2]),b(h,"class","label ml-2"),v(h,"cursor","pointer"),v(e,"display","flex"),v(e,"align-items","center"),b(e,"class","mb-2")},m(s,a){c(s,e,a),l(e,n),l(n,o),o.checked=t[0][t[1].symbol],l(n,r),l(n,i),l(e,f),l(e,h),l(h,g),y||(w=[m(o,"change",t[14]),m(o,"change",t[8])],y=!0)},p(t,e){3&e&&(o.checked=t[0][t[1].symbol]),2&e&&k!==(k=t[1].label+"")&&$(g,k)},d(t){t&&a(e),y=!1,s(w)}}}function Lt(t){let e,n,s,o,r,i=t[1].label+"";function f(t,e){return"textarea"===t[1].type?At:"text"===t[1].type?Ot:"number"===t[1].type?Ht:"password"===t[1].type?Kt:void 0}let m=f(t),h=m&&m(t);return{c(){e=u("div"),n=u("p"),s=d(i),o=p(),r=u("div"),h&&h.c(),b(n,"class","label"),b(r,"class","control"),b(e,"class","field"),b(e,"id",t[2])},m(t,i){c(t,e,i),l(e,n),l(n,s),l(e,o),l(e,r),h&&h.m(r,null)},p(t,e){2&e&&i!==(i=t[1].label+"")&&$(s,i),m===(m=f(t))&&h?h.p(t,e):(h&&h.d(1),h=m&&m(t),h&&(h.c(),h.m(r,null)))},d(t){t&&a(e),h&&h.d()}}}function Tt(t){let e,n,s=t[1].label+"";return{c(){e=u("p"),n=d(s),b(e,"class","label")},m(t,s){c(t,e,s),l(e,n)},p(t,e){2&e&&s!==(s=t[1].label+"")&&$(n,s)},d(t){t&&a(e)}}}function Pt(t,e){let n,s,o,r,i,f,m=e[16].label+"";return{key:t,first:null,c(){n=u("option"),s=d(m),o=p(),n.__value=r=e[16].value,n.value=n.__value,n.selected=i=e[16].selected,n.disabled=f=e[16].disabled,this.first=n},m(t,e){c(t,n,e),l(n,s),l(n,o)},p(t,o){e=t,2&o&&m!==(m=e[16].label+"")&&$(s,m),2&o&&r!==(r=e[16].value)&&(n.__value=r,n.value=n.__value),2&o&&i!==(i=e[16].selected)&&(n.selected=i),2&o&&f!==(f=e[16].disabled)&&(n.disabled=f)},d(t){t&&a(n)}}}function Kt(t){let e,n,o,r;return{c(){e=u("input"),b(e,"type","password"),b(e,"class","input"),b(e,"placeholder",n=t[1].placeholder)},m(n,s){c(n,e,s),y(e,t[0][t[1].symbol]),o||(r=[m(e,"input",t[13]),m(e,"input",t[7])],o=!0)},p(t,s){2&s&&n!==(n=t[1].placeholder)&&b(e,"placeholder",n),3&s&&e.value!==t[0][t[1].symbol]&&y(e,t[0][t[1].symbol])},d(t){t&&a(e),o=!1,s(r)}}}function Ht(t){let e,n,o,r;return{c(){e=u("input"),b(e,"type","number"),b(e,"class","input"),b(e,"placeholder",n=t[1].placeholder)},m(n,s){c(n,e,s),y(e,t[0][t[1].symbol]),o||(r=[m(e,"input",t[12]),m(e,"input",t[6])],o=!0)},p(t,s){2&s&&n!==(n=t[1].placeholder)&&b(e,"placeholder",n),3&s&&g(e.value)!==t[0][t[1].symbol]&&y(e,t[0][t[1].symbol])},d(t){t&&a(e),o=!1,s(r)}}}function Ot(t){let e,n,o,r;return{c(){e=u("input"),b(e,"type","text"),b(e,"class","input"),b(e,"placeholder",n=t[1].placeholder)},m(n,s){c(n,e,s),y(e,t[0][t[1].symbol]),o||(r=[m(e,"input",t[11]),m(e,"input",t[5])],o=!0)},p(t,s){2&s&&n!==(n=t[1].placeholder)&&b(e,"placeholder",n),3&s&&e.value!==t[0][t[1].symbol]&&y(e,t[0][t[1].symbol])},d(t){t&&a(e),o=!1,s(r)}}}function At(t){let e,n,o,r;return{c(){e=u("textarea"),b(e,"class","textarea"),b(e,"placeholder",n=t[1].placeholder)},m(n,s){c(n,e,s),y(e,t[0][t[1].symbol]),o||(r=[m(e,"input",t[10]),m(e,"change",t[4])],o=!0)},p(t,s){2&s&&n!==(n=t[1].placeholder)&&b(e,"placeholder",n),3&s&&y(e,t[0][t[1].symbol])},d(t){t&&a(e),o=!1,s(r)}}}function Dt(e){let n,s=e[1]&&Ct(e);return{c(){s&&s.c(),n=f(),this.c=t},m(t,e){s&&s.m(t,e),c(t,n,e)},p(t,[e]){t[1]?s?s.p(t,e):(s=Ct(t),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:t,o:t,d(t){s&&s.d(t),t&&a(n)}}}function Ft(t,e,n){let{field:s}=e,{data:o}=e;const r=dt();return t.$$set=t=>{"field"in t&&n(1,s=t.field),"data"in t&&n(0,o=t.data)},[o,s,r,()=>["text","number","password","textarea"].includes(s.type),function(e){M.call(this,t,e)},function(e){M.call(this,t,e)},function(e){M.call(this,t,e)},function(e){M.call(this,t,e)},function(e){M.call(this,t,e)},function(e){M.call(this,t,e)},function(){o[s.symbol]=this.value,n(0,o),n(1,s)},function(){o[s.symbol]=this.value,n(0,o),n(1,s)},function(){o[s.symbol]=g(this.value),n(0,o),n(1,s)},function(){o[s.symbol]=this.value,n(0,o),n(1,s)},function(){o[s.symbol]=this.checked,n(0,o),n(1,s)},function(){o[s.symbol]=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(0,o),n(1,s)}]}class It extends I{constructor(t){super(),this.shadowRoot.innerHTML='<style>.select,.select>select{width:100%}.switch{position:relative;display:inline-block;width:60px;height:34px}.switch input{opacity:0;width:0;height:0}.switch .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:0.4s;transition:0.4s;border-radius:34px}.switch .slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:white;-webkit-transition:0.4s;transition:0.4s;border-radius:50%}.switch input:checked+.slider{background-color:#2196f3}.switch input:checked+.slider{box-shadow:0 0 1px #2196f3}.switch input:checked+.slider:before{-webkit-transform:translateX(26px);-ms-transform:translateX(26px);transform:translateX(26px)}</style>',et(this,{target:this.shadowRoot,props:k(this.attributes),customElement:!0},Ft,Dt,r,{field:1,data:0},null),t&&(t.target&&c(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["field","data"]}get field(){return this.$$.ctx[1]}set field(t){this.$$set({field:t}),O()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),O()}}function Yt(t,e,n){const s=t.slice();return s[3]=e[n],s}function qt(t){let e,n,s=[],o=new Map,r=t[1];const i=t=>t[3].symbol;for(let e=0;e<r.length;e+=1){let n=Yt(t,r,e),l=i(n);o.set(l,s[e]=Bt(l,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=f()},m(t,o){for(let e=0;e<s.length;e+=1)s[e].m(t,o);c(t,e,o),n=!0},p(t,n){3&n&&(r=t[1],Y(),s=G(s,n,i,1,t,r,o,e.parentNode,X,Bt,e,Yt),q())},i(t){if(!n){for(let t=0;t<r.length;t+=1)B(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)U(s[t]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&a(e)}}}function Bt(t,e){let n,s,o,r;function i(t){e[2](t)}let l={field:e[3]};return void 0!==e[0]&&(l.data=e[0]),s=new It({props:l}),R.push((()=>W(s,"data",i))),{key:t,first:null,c(){n=f(),J(s.$$.fragment),this.first=n},m(t,e){c(t,n,e),Q(s,t,e),r=!0},p(t,n){e=t;const r={};2&n&&(r.field=e[3]),!o&&1&n&&(o=!0,r.data=e[0],P((()=>o=!1))),s.$set(r)},i(t){r||(B(s.$$.fragment,t),r=!0)},o(t){U(s.$$.fragment,t),r=!1},d(t){t&&a(n),Z(s,t)}}}function Ut(e){let n,s,o=e[1]&&e[0]&&qt(e);return{c(){o&&o.c(),n=f(),this.c=t},m(t,e){o&&o.m(t,e),c(t,n,e),s=!0},p(t,[e]){t[1]&&t[0]?o?(o.p(t,e),3&e&&B(o,1)):(o=qt(t),o.c(),B(o,1),o.m(n.parentNode,n)):o&&(Y(),U(o,1,1,(()=>{o=null})),q())},i(t){s||(B(o),s=!0)},o(t){U(o),s=!1},d(t){o&&o.d(t),t&&a(n)}}}function Vt(t,e,n){let{fields:s}=e,{data:o}=e;return t.$$set=t=>{"fields"in t&&n(1,s=t.fields),"data"in t&&n(0,o=t.data)},[o,s,function(t){o=t,n(0,o)}]}customElements.define("tf-input",It);class Xt extends I{constructor(t){super(),et(this,{target:this.shadowRoot,props:k(this.attributes),customElement:!0},Vt,Ut,r,{fields:1,data:0},null),t&&(t.target&&c(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["fields","data"]}get fields(){return this.$$.ctx[1]}set fields(t){this.$$set({fields:t}),O()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),O()}}function Gt(t,e,n){const s=t.slice();return s[4]=e[n],s}function Wt(t){let e,n=[],s=new Map,o=t[1];const r=t=>t[4].label;for(let e=0;e<o.length;e+=1){let i=Gt(t,o,e),l=r(i);s.set(l,n[e]=Jt(l,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=f()},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);c(t,e,s)},p(t,i){3&i&&(o=t[1],n=G(n,i,r,1,t,o,s,e.parentNode,V,Jt,e,Gt))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&a(e)}}}function Jt(t,e){let n,s,o,r,i,f,g,y,v=e[4].label+"";function w(){return e[3](e[4])}return{key:t,first:null,c(){n=u("li"),s=u("a"),o=u("span"),r=d(v),i=p(),b(s,"href","#!"),b(n,"class",f=e[0]===e[4].value?"is-active":""),this.first=n},m(t,e){c(t,n,e),l(n,s),l(s,o),l(o,r),l(n,i),g||(y=m(s,"click",h(w)),g=!0)},p(t,s){e=t,2&s&&v!==(v=e[4].label+"")&&$(r,v),3&s&&f!==(f=e[0]===e[4].value?"is-active":"")&&b(n,"class",f)},d(t){t&&a(n),g=!1,y()}}}function Qt(e){let n,s,o,r=e[1]&&Wt(e);return{c(){n=u("div"),s=u("ul"),r&&r.c(),this.c=t,b(n,"class",o="tabs "+(e[2]?"is-centered":""))},m(t,e){c(t,n,e),l(n,s),r&&r.m(s,null)},p(t,[e]){t[1]?r?r.p(t,e):(r=Wt(t),r.c(),r.m(s,null)):r&&(r.d(1),r=null),4&e&&o!==(o="tabs "+(t[2]?"is-centered":""))&&b(n,"class",o)},i:t,o:t,d(t){t&&a(n),r&&r.d()}}}function Zt(t,e,n){let{tabs:s}=e,{active:o}=e,{centered:r=!0}=e;return t.$$set=t=>{"tabs"in t&&n(1,s=t.tabs),"active"in t&&n(0,o=t.active),"centered"in t&&n(2,r=t.centered)},[o,s,r,t=>n(0,o=t.value)]}customElements.define("tf-inputs",Xt);class te extends I{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',et(this,{target:this.shadowRoot,props:k(this.attributes),customElement:!0},Zt,Qt,r,{tabs:1,active:0,centered:2},null),t&&(t.target&&c(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["tabs","active","centered"]}get tabs(){return this.$$.ctx[1]}set tabs(t){this.$$set({tabs:t}),O()}get active(){return this.$$.ctx[0]}set active(t){this.$$set({active:t}),O()}get centered(){return this.$$.ctx[2]}set centered(t){this.$$set({centered:t}),O()}}function ee(e){let n,s,o,r,i;function d(t){e[4](t)}let p={field:{type:"select",symbol:"selected",options:e[1]}};return void 0!==e[0]&&(p.data=e[0]),o=new It({props:p}),R.push((()=>W(o,"data",d))),o.$on("change",e[3]),{c(){n=u("div"),s=u("div"),J(o.$$.fragment),this.c=t,b(n,"class","is-flex is-justify-content-flex-end is-align-items-center")},m(t,e){c(t,n,e),l(n,s),Q(o,s,null),i=!0},p(t,[e]){const n={};2&e&&(n.field={type:"select",symbol:"selected",options:t[1]}),!r&&1&e&&(r=!0,n.data=t[0],P((()=>r=!1))),o.$set(n)},i(t){i||(B(o.$$.fragment,t),i=!0)},o(t){U(o.$$.fragment,t),i=!1},d(t){t&&a(n),Z(o)}}}function ne(t,e,n){let s;var o;const r=E();let l={selected:"0"};const c=null===(o=window.configs)||void 0===o?void 0:o.baseConfig;let a;i(t,c,(t=>n(7,s=t)));let u=[];function d(){a=s,n(1,u=a.map(((t,e)=>({label:t.name||`Profile ${e+1}`,value:e.toString()})))),r("profile",a[l.selected])}var p;return p=d,S().$$.on_mount.push(p),[l,u,c,d,function(t){l=t,n(0,l)}]}customElements.define("tf-tabs",te);class se extends I{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',et(this,{target:this.shadowRoot,props:k(this.attributes),customElement:!0},ne,ee,r,{},null),t&&t.target&&c(t.target,this,t.anchor)}}function oe(e){let n,s,o,r;return{c(){n=u("div"),s=d("/> "),o=d(e[1]),this.c=t,b(n,"class",r="notification is-"+e[0])},m(t,e){c(t,n,e),l(n,s),l(n,o)},p(t,[e]){2&e&&$(o,t[1]),1&e&&r!==(r="notification is-"+t[0])&&b(n,"class",r)},i:t,o:t,d(t){t&&a(n)}}}function re(t,e,n){let{type:s}=e,{message:o}=e;return t.$$set=t=>{"type"in t&&n(0,s=t.type),"message"in t&&n(1,o=t.message)},[s,o]}customElements.define("tf-select-profile",se);class ie extends I{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',et(this,{target:this.shadowRoot,props:k(this.attributes),customElement:!0},re,oe,r,{type:0,message:1},null),t&&(t.target&&c(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["type","message"]}get type(){return this.$$.ctx[0]}set type(t){this.$$set({type:t}),O()}get message(){return this.$$.ctx[1]}set message(t){this.$$set({message:t}),O()}}function le(t,e,n){const s=t.slice();return s[5]=e[n],s[6]=e,s[7]=n,s}function ce(t){let e,n,s=[],o=new Map,r=t[0];const i=t=>t[5].id;for(let e=0;e<r.length;e+=1){let n=le(t,r,e),l=i(n);o.set(l,s[e]=ae(l,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=f()},m(t,o){for(let e=0;e<s.length;e+=1)s[e].m(t,o);c(t,e,o),n=!0},p(t,n){3&n&&(r=t[0],Y(),s=G(s,n,i,1,t,r,o,e.parentNode,X,ae,e,le),q())},i(t){if(!n){for(let t=0;t<r.length;t+=1)B(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)U(s[t]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&a(e)}}}function ae(t,e){let n,s,o,r,i,f,h,g,y,v,w,k,x,_=e[5].name+"";function S(){return e[3](e[7])}function E(t){e[4](t,e[5],e[6],e[7])}let M={fields:e[1]};return void 0!==e[5]&&(M.data=e[5]),g=new Xt({props:M}),R.push((()=>W(g,"data",E))),{key:t,first:null,c(){n=u("div"),s=u("div"),o=u("p"),r=d(_),i=p(),f=u("button"),f.innerHTML="<span>-</span>",h=p(),J(g.$$.fragment),v=p(),b(o,"class","is-size-5 has-text-weight-bold"),b(f,"type","button"),b(f,"class","button is-danger"),b(s,"class","is-flex is-justify-content-space-between is-align-items-center"),b(n,"class","box"),this.first=n},m(t,e){c(t,n,e),l(n,s),l(s,o),l(o,r),l(s,i),l(s,f),l(n,h),Q(g,n,null),l(n,v),w=!0,k||(x=m(f,"click",S),k=!0)},p(t,n){e=t,(!w||1&n)&&_!==(_=e[5].name+"")&&$(r,_);const s={};2&n&&(s.fields=e[1]),!y&&1&n&&(y=!0,s.data=e[5],P((()=>y=!1))),g.$set(s)},i(t){w||(B(g.$$.fragment,t),w=!0)},o(t){U(g.$$.fragment,t),w=!1},d(t){t&&a(n),Z(g),k=!1,x()}}}function ue(e){let n,s,o,r,i,d,f,h=e[0]&&ce(e);return{c(){n=u("div"),s=u("button"),s.innerHTML="<span>+</span>",o=p(),r=u("div"),h&&h.c(),this.c=t,b(s,"type","button"),b(s,"class","button is-primary"),b(n,"class","is-flex is-justify-content-flex-end is-align-items-center"),b(r,"class","worker-container")},m(t,a){c(t,n,a),l(n,s),c(t,o,a),c(t,r,a),h&&h.m(r,null),i=!0,d||(f=m(s,"click",e[2]),d=!0)},p(t,[e]){t[0]?h?(h.p(t,e),1&e&&B(h,1)):(h=ce(t),h.c(),B(h,1),h.m(r,null)):h&&(Y(),U(h,1,1,(()=>{h=null})),q())},i(t){i||(B(h),i=!0)},o(t){U(h),i=!1},d(t){t&&a(n),t&&a(o),t&&a(r),h&&h.d(),d=!1,f()}}}function de(t,e,n){let{nodes:s}=e,{fields:o}=e;return t.$$set=t=>{"nodes"in t&&n(0,s=t.nodes),"fields"in t&&n(1,o=t.fields)},[s,o,function(e){M.call(this,t,e)},t=>n(0,s=s.filter(((e,n)=>t!==n))),function(t,e,o,r){o[r]=t,n(0,s)}]}customElements.define("tf-alert",ie);class pe extends I{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");.worker-container{overflow-x:hidden;overflow-y:auto;max-height:70vh;will-change:transform;padding-bottom:5rem;margin-bottom:20px}</style>',et(this,{target:this.shadowRoot,props:k(this.attributes),customElement:!0},de,ue,r,{nodes:0,fields:1},null),t&&(t.target&&c(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["nodes","fields"]}get nodes(){return this.$$.ctx[0]}set nodes(t){this.$$set({nodes:t}),O()}get fields(){return this.$$.ctx[1]}set fields(t){this.$$set({fields:t}),O()}}function fe(t){let e,n,s,o,r,i,l,u,d;function m(e){t[15](e)}e=new se({}),e.$on("profile",t[14]);let h={tabs:t[8]};void 0!==t[5]&&(h.active=t[5]),s=new te({props:h}),R.push((()=>W(s,"active",m)));const b=[ve,ye,$e,ge],g=[];function $(t,e){return"config"===t[5]?0:"network"===t[5]?1:"master"===t[5]?2:"workers"===t[5]?3:-1}return~(i=$(t))&&(l=g[i]=b[i](t)),{c(){J(e.$$.fragment),n=p(),J(s.$$.fragment),r=p(),l&&l.c(),u=f()},m(t,o){Q(e,t,o),c(t,n,o),Q(s,t,o),c(t,r,o),~i&&g[i].m(t,o),c(t,u,o),d=!0},p(t,e){const n={};!o&&32&e&&(o=!0,n.active=t[5],P((()=>o=!1))),s.$set(n);let r=i;i=$(t),i===r?~i&&g[i].p(t,e):(l&&(Y(),U(g[r],1,1,(()=>{g[r]=null})),q()),~i?(l=g[i],l?l.p(t,e):(l=g[i]=b[i](t),l.c()),B(l,1),l.m(u.parentNode,u)):l=null)},i(t){d||(B(e.$$.fragment,t),B(s.$$.fragment,t),B(l),d=!0)},o(t){U(e.$$.fragment,t),U(s.$$.fragment,t),U(l),d=!1},d(t){Z(e,t),t&&a(n),Z(s,t),t&&a(r),~i&&g[i].d(t),t&&a(u)}}}function me(t){let e,n;return e=new ie({props:{type:"danger",message:t[6]||"Failed to deploy K8S."}}),{c(){J(e.$$.fragment)},m(t,s){Q(e,t,s),n=!0},p(t,n){const s={};64&n&&(s.message=t[6]||"Failed to deploy K8S."),e.$set(s)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){U(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function he(e){let n,s;return n=new ie({props:{type:"success",message:"Successfully deployed K8S."}}),{c(){J(n.$$.fragment)},m(t,e){Q(n,t,e),s=!0},p:t,i(t){s||(B(n.$$.fragment,t),s=!0)},o(t){U(n.$$.fragment,t),s=!1},d(t){Z(n,t)}}}function be(t){let e,n;return e=new ie({props:{type:"info",message:t[6]||"Loading..."}}),{c(){J(e.$$.fragment)},m(t,s){Q(e,t,s),n=!0},p(t,n){const s={};64&n&&(s.message=t[6]||"Loading..."),e.$set(s)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){U(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function ge(t){let e,n,s;function o(e){t[19](e)}let r={fields:t[11]};return void 0!==t[0].workers&&(r.nodes=t[0].workers),e=new pe({props:r}),R.push((()=>W(e,"nodes",o))),e.$on("click",t[20]),{c(){J(e.$$.fragment)},m(t,n){Q(e,t,n),s=!0},p(t,s){const o={};!n&&1&s&&(n=!0,o.nodes=t[0].workers,P((()=>n=!1))),e.$set(o)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){U(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function $e(t){let e,n,s;function o(e){t[18](e)}let r={fields:t[11]};return void 0!==t[0].master&&(r.data=t[0].master),e=new Xt({props:r}),R.push((()=>W(e,"data",o))),{c(){J(e.$$.fragment)},m(t,n){Q(e,t,n),s=!0},p(t,s){const o={};!n&&1&s&&(n=!0,o.data=t[0].master,P((()=>n=!1))),e.$set(o)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){U(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function ye(t){let e,n,s;function o(e){t[17](e)}let r={fields:t[10]};return void 0!==t[0].network&&(r.data=t[0].network),e=new Xt({props:r}),R.push((()=>W(e,"data",o))),{c(){J(e.$$.fragment)},m(t,n){Q(e,t,n),s=!0},p(t,s){const o={};!n&&1&s&&(n=!0,o.data=t[0].network,P((()=>n=!1))),e.$set(o)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){U(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function ve(t){let e,n,s;function o(e){t[16](e)}let r={fields:t[9]};return void 0!==t[0]&&(r.data=t[0]),e=new Xt({props:r}),R.push((()=>W(e,"data",o))),{c(){J(e.$$.fragment)},m(t,n){Q(e,t,n),s=!0},p(t,s){const o={};!n&&1&s&&(n=!0,o.data=t[0],P((()=>n=!1))),e.$set(o)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){U(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function we(t){let e;return{c(){e=d("Deploy")},m(t,n){c(t,e,n)},d(t){t&&a(e)}}}function ke(t){let e;return{c(){e=d("Back")},m(t,n){c(t,e,n)},d(t){t&&a(e)}}}function xe(e){let n,o,r,i,d,f,g,$,y,w,k,x,_,S,E;const M=[be,he,me,fe],N=[];function R(t,e){return t[1]?0:t[2]?1:t[3]?2:3}function C(t,e){return t[2]||t[3]?ke:we}g=R(e),$=N[g]=M[g](e);let j=C(e),z=j(e);return{c(){n=u("div"),o=u("form"),r=u("h4"),r.textContent="Deploy a Kubernetes",i=p(),d=u("hr"),f=p(),$.c(),y=p(),w=u("div"),k=u("button"),z.c(),this.c=t,b(r,"class","is-size-4"),b(k,"class",x="button is-primary "+(e[1]?"is-loading":"")),b(k,"type","submit"),k.disabled=e[7],b(w,"class","is-flex is-justify-content-flex-end is-align-items-center"),b(o,"class","box"),v(n,"padding","15px")},m(t,s){c(t,n,s),l(n,o),l(o,r),l(o,i),l(o,d),l(o,f),N[g].m(o,null),l(o,y),l(o,w),l(w,k),z.m(k,null),_=!0,S||(E=[m(k,"click",e[13]),m(o,"submit",h(e[12]))],S=!0)},p(t,[e]){let n=g;g=R(t),g===n?N[g].p(t,e):(Y(),U(N[n],1,1,(()=>{N[n]=null})),q(),$=N[g],$?$.p(t,e):($=N[g]=M[g](t),$.c()),B($,1),$.m(o,y)),j!==(j=C(t))&&(z.d(1),z=j(t),z&&(z.c(),z.m(k,null))),(!_||2&e&&x!==(x="button is-primary "+(t[1]?"is-loading":"")))&&b(k,"class",x),(!_||128&e)&&(k.disabled=t[7])},i(t){_||(B($),_=!0)},o(t){U($),_=!1},d(t){t&&a(n),N[g].d(),z.d(),S=!1,s(E)}}}function _e(t,e,n){let s;var o,r,i;const{events:l}=null!==(r=null===(o=window.configs)||void 0===o?void 0:o.grid3_client)&&void 0!==r?r:{},c=null===(i=window.configs)||void 0===i?void 0:i.deploymentStore;let a,u,d=new gt,p="config",f=!1,m=!1,h=!1;requestAnimationFrame((()=>n(0,d.sshKey=null==a?void 0:a.sshKey,d)));return t.$$.update=()=>{31&t.$$.dirty&&n(7,s=(f||!d.valid)&&!(m||h)||!a||""===a.mnemonics||""===a.storeSecret)},[d,f,m,h,a,p,u,s,[{label:"Config",value:"config"},{label:"Network",value:"network"},{label:"Master",value:"master"},{label:"Workers",value:"workers"}],[{label:"Name",symbol:"name",placeholder:"Your K8S Name",type:"text"},{label:"Cluster Token",symbol:"secret",placeholder:"Your Cluster Token",type:"text"},{label:"Public SSH Key",symbol:"sshKey",placeholder:"Your Public SSH Key",type:"text"},{label:"Metadata",symbol:"metadata",placeholder:"Your Metadata",type:"text"},{label:"Description",symbol:"description",placeholder:"Your Description",type:"textarea"}],[{label:"Network Name",symbol:"name",placeholder:"Your Network Name",type:"text"},{label:"Network IP Range",symbol:"ipRange",placeholder:"Your Network IP Range",type:"text"}],[{label:"Name",symbol:"name",placeholder:"Enter name",type:"text"},{label:"CPU",symbol:"cpu",placeholder:"CPU",type:"number"},{label:"Memory",symbol:"memory",placeholder:"Memory in MB",type:"number"},{label:"Disk Size",symbol:"diskSize",placeholder:"Disk size in GB",type:"number"},{label:"Public IP",symbol:"publicIp",type:"checkbox"},{label:"Plantery Network",symbol:"plantery",placeholder:"",type:"checkbox"},{label:"Node ID",symbol:"node",placeholder:"Node ID",type:"number"},{label:"Root FS Size",symbol:"rootFsSize",placeholder:"Root File System Size",type:"number"}],function(){n(1,f=!0),n(2,m=!1),n(3,h=!1),n(6,u=void 0);const t=t=>"string"==typeof t?n(6,u=t):null;l.addListener("logs",t),console.log(d),Mt(d,a).then((()=>{c.set(0),n(2,m=!0)})).catch((t=>{n(3,h=!0),n(6,u=t.message)})).finally((()=>{n(1,f=!1),l.removeListener("logs",t)}))},function(t){(m||h)&&(t.preventDefault(),n(2,m=!1),n(3,h=!1),n(1,f=!1))},({detail:t})=>n(4,a=t),function(t){p=t,n(5,p)},function(t){d=t,n(0,d)},function(e){t.$$.not_equal(d.network,e)&&(d.network=e,n(0,d))},function(e){t.$$.not_equal(d.master,e)&&(d.master=e,n(0,d))},function(e){t.$$.not_equal(d.workers,e)&&(d.workers=e,n(0,d))},()=>n(0,d.workers=[...d.workers,new ht],d)]}customElements.define("tf-nodes-container",pe);customElements.define("tf-kubernetes",class extends I{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',et(this,{target:this.shadowRoot,props:k(this.attributes),customElement:!0},_e,xe,r,{},null),t&&t.target&&c(t.target,this,t.anchor)}})}();
