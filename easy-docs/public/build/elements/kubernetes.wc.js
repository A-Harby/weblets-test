!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,n,l){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}(n,l))}function c(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(){return d("")}function m(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function h(t){return function(e){return e.preventDefault(),t.call(this,e)}}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t){return""===t?null:+t}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}function k(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}function w(t){const e={};for(const n of t)e[n.name]=n.value;return e}let $;function x(t){$=t}function _(){if(!$)throw new Error("Function called outside component initialization");return $}function S(){const t=_();return(e,n)=>{const l=t.$$.callbacks[e];if(l){const o=function(t,e,n=!1){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,!1,e),l}(e,n);l.slice().forEach((e=>{e.call(t,o)}))}}}const C=[],M=[],N=[],E=[],P=Promise.resolve();let z=!1;function R(t){N.push(t)}let j=!1;const K=new Set;function O(){if(!j){j=!0;do{for(let t=0;t<C.length;t+=1){const e=C[t];x(e),T(e.$$)}for(x(null),C.length=0;M.length;)M.pop()();for(let t=0;t<N.length;t+=1){const e=N[t];K.has(e)||(K.add(e),e())}N.length=0}while(C.length);for(;E.length;)E.pop()();z=!1,j=!1,K.clear()}}function T(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const I=new Set;let L,D;function H(t,e){t&&t.i&&(I.delete(t),t.i(e))}function F(t,e,n,l){if(t&&t.o){if(I.has(t))return;I.add(t),L.c.push((()=>{I.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}}function A(t,e){t.d(1),e.delete(t.key)}function B(t,e,n,l,o,r,s,c,i,a,u,d){let f=t.length,p=r.length,m=f;const h={};for(;m--;)h[t[m].key]=m;const b=[],y=new Map,g=new Map;for(m=p;m--;){const t=d(o,r,m),c=n(t);let i=s.get(c);i?l&&i.p(t,e):(i=a(c,t),i.c()),y.set(c,b[m]=i),c in h&&g.set(c,Math.abs(m-h[c]))}const v=new Set,k=new Set;function w(t){H(t,1),t.m(c,u),s.set(t.key,t),u=t.first,p--}for(;f&&p;){const e=b[p-1],n=t[f-1],l=e.key,o=n.key;e===n?(u=e.first,f--,p--):y.has(o)?!s.has(l)||v.has(l)?w(e):k.has(o)?f--:g.get(l)>g.get(o)?(k.add(l),w(e)):(v.add(o),f--):(i(n,s),f--)}for(;f--;){const e=t[f];y.has(e.key)||i(e,s)}for(;p;)w(b[p-1]);return b}function U(t,n,r,s){const{fragment:c,on_mount:i,on_destroy:a,after_update:u}=t.$$;c&&c.m(n,r),s||R((()=>{const n=i.map(e).filter(o);a?a.push(...n):l(n),t.$$.on_mount=[]})),u.forEach(R)}function V(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(t,e){-1===t.$$.dirty[0]&&(C.push(t),z||(z=!0,P.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function G(e,o,r,s,c,i,u,d=[-1]){const f=$;x(e);const p=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||f.$$.root};u&&u(p.root);let m=!1;if(p.ctx=r?r(e,o.props||{},((t,n,...l)=>{const o=l.length?l[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),m&&Y(e,t)),n})):[],p.update(),m=!0,l(p.before_update),p.fragment=!!s&&s(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();o.intro&&H(e.$$.fragment),U(e,o.target,o.anchor,o.customElement),O()}x(f)}var W;"function"==typeof HTMLElement&&(D=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(o);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){l(this.$$.on_disconnect)}$destroy(){V(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var q=new Uint8Array(16);function J(){if(!W&&!(W="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return W(q)}var Q=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function X(t){return"string"==typeof t&&Q.test(t)}for(var Z,tt,et=[],nt=0;nt<256;++nt)et.push((nt+256).toString(16).substr(1));function lt(t,e,n){var l=(t=t||{}).random||(t.rng||J)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=l[o];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(et[t[e+0]]+et[t[e+1]]+et[t[e+2]]+et[t[e+3]]+"-"+et[t[e+4]]+et[t[e+5]]+"-"+et[t[e+6]]+et[t[e+7]]+"-"+et[t[e+8]]+et[t[e+9]]+"-"+et[t[e+10]]+et[t[e+11]]+et[t[e+12]]+et[t[e+13]]+et[t[e+14]]+et[t[e+15]]).toLowerCase();if(!X(n))throw TypeError("Stringified UUID is invalid");return n}(l)}function ot(t){const e=+t;return"number"==typeof e&&!isNaN(e)&&e>=0&&e.toFixed(0)===e.toString()}class rt{constructor(t=lt(),e="vm_"+t.split("-")[0],n=0,l=0,o=100,r=!1,s=0,c=25,i=!0){this.id=t,this.name=e,this.node=n,this.cpu=l,this.diskSize=o,this.publicIp=r,this.memory=s,this.rootFsSize=c,this.plantery=i}get valid(){const{name:t,node:e,cpu:n,diskSize:l,memory:o,rootFsSize:r}=this;return""!==t&&ot(e)&&ot(n)&&ot(l)&&ot(o)&&ot(r)}}class st extends rt{}class ct extends rt{}class it{constructor(t="nw_"+lt().split("-")[0],e="10.20.0.0/16"){this.name=t,this.ipRange=e}get valid(){const{name:t,ipRange:e}=this;return""!==t&&""!==e}}class at{constructor(t=lt(),e=new st,n=[new ct],l=new it,o="",r="",s="",c="",i="",a=window.configs.baseConfig){this.id=t,this.master=e,this.workers=n,this.network=l,this.name=o,this.secret=r,this.sshKey=s,this.metadata=c,this.description=i,this.configs=a}get valid(){const{secret:t,sshKey:e,master:n,workers:l,network:o}=this;return""!==t&&""!==e&&n.valid&&o.valid&&l.reduce(((t,e)=>t&&e.valid),!0)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */const{NetworkModel:ut}=null!==(tt=null===(Z=window.configs)||void 0===Z?void 0:Z.grid3_client)&&void 0!==tt?tt:{};var dt,ft,pt,mt;const{HTTPMessageBusClient:ht}=null!==(ft=null===(dt=window.configs)||void 0===dt?void 0:dt.client)&&void 0!==ft?ft:{},{GridClient:bt,K8SModel:yt,KubernetesNodeModel:gt}=null!==(mt=null===(pt=window.configs)||void 0===pt?void 0:pt.grid3_client)&&void 0!==mt?mt:{};async function vt(t,e){const{configs:n,master:l,workers:o,network:r}=t,s=function(t,e){var n={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&e.indexOf(l)<0&&(n[l]=t[l]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(l=Object.getOwnPropertySymbols(t);o<l.length;o++)e.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(t,l[o])&&(n[l[o]]=t[l[o]])}return n}(t,["configs","master","workers","network"]),{secret:c,sshKey:i,description:a,metadata:u,name:d}=s,{mnemonics:f,storeSecret:p,networkEnv:m}=e,h=new ht(0,""),b=new bt(m,f,await async function(t){}(),p,h,void 0,"tfkvstore"),y=[kt(l)],g=o.map(kt),v=new yt;return v.name=d,v.secret=c,v.network=function(t){const e=new ut;return e.name=t.name,e.ip_range=t.ipRange,e}(r),v.masters=y,v.workers=g,v.metadata=u,v.description=a,v.ssh_key=i,b.connect().then((()=>b.k8s.deploy(v)))}function kt(t){const e=new gt;return e.name=t.name,e.node_id=t.node,e.cpu=t.cpu,e.disk_size=t.diskSize,e.memory=t.memory,e.public_ip=t.publicIp,e.rootfs_size=t.rootFsSize,e.planetary=t.plantery,e}function wt(t,e,n){const l=t.slice();return l[7]=e[n],l[9]=n,l}function $t(t,e){let n,l,o,r,s=e[9]+1+"";return{key:t,first:null,c(){n=u("option"),l=d("Profile "),o=d(s),n.__value=r=e[9],n.value=n.__value,this.first=n},m(t,e){i(t,n,e),c(n,l),c(n,o)},p(t,l){e=t,1&l&&s!==(s=e[9]+1+"")&&g(o,s),1&l&&r!==(r=e[9])&&(n.__value=r,n.value=n.__value)},d(t){t&&a(n)}}}function xt(e){let n,l,o,r,s=[],d=new Map,f=e[0];const p=t=>t[9];for(let t=0;t<f.length;t+=1){let n=wt(e,f,t),l=p(n);d.set(l,s[t]=$t(l,n))}return{c(){n=u("div"),l=u("select");for(let t=0;t<s.length;t+=1)s[t].c();this.c=t,b(n,"class","select mb-4"),k(n,"display","flex"),k(n,"justify-content","flex-end")},m(t,a){i(t,n,a),c(n,l);for(let t=0;t<s.length;t+=1)s[t].m(l,null);o||(r=m(l,"change",e[2]),o=!0)},p(t,[e]){1&e&&(f=t[0],s=B(s,e,p,1,t,f,d,l,A,$t,null,wt))},i:t,o:t,d(t){t&&a(n);for(let t=0;t<s.length;t+=1)s[t].d();o=!1,r()}}}const _t="profile";function St(t,e,n){let l,o;var r;const c=S(),i=null===(r=window.configs)||void 0===r?void 0:r.baseConfig;var a;return s(t,i,(t=>n(3,o=t))),a=()=>{c(_t,l[0])},_().$$.on_mount.push(a),t.$$.update=()=>{8&t.$$.dirty&&n(0,l=o.profiles)},[l,i,function(t){c(_t,l[t.target.selectedIndex])},o]}class Ct extends D{constructor(t){super(),G(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},St,xt,r,{},null),t&&t.target&&i(t.target,this,t.anchor)}}function Mt(t,e,n){const l=t.slice();return l[34]=e[n],l[35]=e,l[36]=n,l}function Nt(t,e,n){const l=t.slice();return l[37]=e[n],l[38]=e,l[39]=n,l}function Et(t,e,n){const l=t.slice();return l[34]=e[n],l[40]=e,l[41]=n,l}function Pt(t,e,n){const l=t.slice();return l[34]=e[n],l[42]=e,l[43]=n,l}function zt(t,e,n){const l=t.slice();return l[34]=e[n],l[44]=e,l[45]=n,l}function Rt(t,e,n){const l=t.slice();return l[34]=e[n],l[46]=e,l[47]=n,l}function jt(t,e,n){const l=t.slice();return l[48]=e[n],l}function Kt(t){let e,n,l,o,r,s,d,m,h,y,g=[],v=new Map;e=new Ct({}),e.$on("profile",t[15]);let k=t[13];const w=t=>t[48].label;for(let e=0;e<k.length;e+=1){let n=jt(t,k,e),l=w(n);v.set(l,g[e]=Lt(l,n))}let $="Config"===t[1]&&Dt(t),x="Master"===t[1]&&Ut(t),_="Workers"===t[1]&&Yt(t),S="Credentials"===t[1]&&qt(t);return{c(){var t;(t=e.$$.fragment)&&t.c(),n=f(),l=u("div"),o=u("ul");for(let t=0;t<g.length;t+=1)g[t].c();r=f(),$&&$.c(),s=f(),x&&x.c(),d=f(),_&&_.c(),m=f(),S&&S.c(),h=p(),b(l,"class","tabs is-centered")},m(t,a){U(e,t,a),i(t,n,a),i(t,l,a),c(l,o);for(let t=0;t<g.length;t+=1)g[t].m(o,null);i(t,r,a),$&&$.m(t,a),i(t,s,a),x&&x.m(t,a),i(t,d,a),_&&_.m(t,a),i(t,m,a),S&&S.m(t,a),i(t,h,a),y=!0},p(t,e){8194&e[0]&&(k=t[13],g=B(g,e,w,1,t,k,v,o,A,Lt,null,jt)),"Config"===t[1]?$?$.p(t,e):($=Dt(t),$.c(),$.m(s.parentNode,s)):$&&($.d(1),$=null),"Master"===t[1]?x?x.p(t,e):(x=Ut(t),x.c(),x.m(d.parentNode,d)):x&&(x.d(1),x=null),"Workers"===t[1]?_?_.p(t,e):(_=Yt(t),_.c(),_.m(m.parentNode,m)):_&&(_.d(1),_=null),"Credentials"===t[1]?S?S.p(t,e):(S=qt(t),S.c(),S.m(h.parentNode,h)):S&&(S.d(1),S=null)},i(t){y||(H(e.$$.fragment,t),y=!0)},o(t){F(e.$$.fragment,t),y=!1},d(t){V(e,t),t&&a(n),t&&a(l);for(let t=0;t<g.length;t+=1)g[t].d();t&&a(r),$&&$.d(t),t&&a(s),x&&x.d(t),t&&a(d),_&&_.d(t),t&&a(m),S&&S.d(t),t&&a(h)}}}function Ot(e){let n,l;function o(t,e){return t[6]?te:Zt}let r=o(e),s=r(e);return{c(){n=u("div"),l=d(">\n        "),s.c(),b(n,"class","notification is-danger")},m(t,e){i(t,n,e),c(n,l),s.m(n,null)},p(t,e){r===(r=o(t))&&s?s.p(t,e):(s.d(1),s=r(t),s&&(s.c(),s.m(n,null)))},i:t,o:t,d(t){t&&a(n),s.d()}}}function Tt(e){let n;return{c(){n=u("div"),n.textContent="> Successfully deployed K8S.",b(n,"class","notification is-success")},m(t,e){i(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}function It(e){let n;function l(t,e){return t[6]?ne:ee}let o=l(e),r=o(e);return{c(){n=u("div"),r.c(),b(n,"class","notification is-info")},m(t,e){i(t,n,e),r.m(n,null)},p(t,e){o===(o=l(t))&&r?r.p(t,e):(r.d(1),r=o(t),r&&(r.c(),r.m(n,null)))},i:t,o:t,d(t){t&&a(n),r.d()}}}function Lt(t,e){let n,l,o,r,s,p,y,g,v=e[48].label+"";function k(){return e[16](e[48])}return{key:t,first:null,c(){n=u("li"),l=u("a"),o=u("span"),r=d(v),s=f(),b(l,"href","#!"),b(n,"class",p=e[1]===e[48].label?"is-active":""),this.first=n},m(t,e){i(t,n,e),c(n,l),c(l,o),c(o,r),c(n,s),y||(g=m(l,"click",h(k)),y=!0)},p(t,l){e=t,2&l[0]&&p!==(p=e[1]===e[48].label?"is-active":"")&&b(n,"class",p)},d(t){t&&a(n),y=!1,g()}}}function Dt(t){let e,n,l=[],o=new Map,r=[],s=new Map,c=t[9];const u=t=>t[34].symbol;for(let e=0;e<c.length;e+=1){let n=Rt(t,c,e),r=u(n);o.set(r,l[e]=At(r,n))}let d=t[10];const m=t=>t[34].symbol;for(let e=0;e<d.length;e+=1){let n=zt(t,d,e),l=m(n);s.set(l,r[e]=Bt(l,n))}return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=f();for(let t=0;t<r.length;t+=1)r[t].c();n=p()},m(t,o){for(let e=0;e<l.length;e+=1)l[e].m(t,o);i(t,e,o);for(let e=0;e<r.length;e+=1)r[e].m(t,o);i(t,n,o)},p(t,i){513&i[0]&&(c=t[9],l=B(l,i,u,1,t,c,o,e.parentNode,A,At,e,Rt)),1025&i[0]&&(d=t[10],r=B(r,i,m,1,t,d,s,n.parentNode,A,Bt,n,zt))},d(t){for(let e=0;e<l.length;e+=1)l[e].d(t);t&&a(e);for(let e=0;e<r.length;e+=1)r[e].d(t);t&&a(n)}}}function Ht(t){let e,n,l;function o(){t[18].call(e,t[34])}return{c(){e=u("input"),b(e,"class","input"),b(e,"type","text"),b(e,"placeholder",t[34].placeholder)},m(r,s){i(r,e,s),v(e,t[0][t[34].symbol]),n||(l=m(e,"input",o),n=!0)},p(n,l){t=n,513&l[0]&&e.value!==t[0][t[34].symbol]&&v(e,t[0][t[34].symbol])},d(t){t&&a(e),n=!1,l()}}}function Ft(t){let e,n,l;function o(){t[17].call(e,t[34])}return{c(){e=u("textarea"),b(e,"class","textarea"),b(e,"placeholder",t[34].placeholder)},m(r,s){i(r,e,s),v(e,t[0][t[34].symbol]),n||(l=m(e,"input",o),n=!0)},p(n,l){t=n,513&l[0]&&v(e,t[0][t[34].symbol])},d(t){t&&a(e),n=!1,l()}}}function At(t,e){let n,l,o,r,s,p,m=e[34].label+"";let h=function(t,e){return t[34].textarea?Ft:Ht}(e),y=h(e);return{key:t,first:null,c(){n=u("div"),l=u("p"),o=d(m),r=f(),s=u("div"),y.c(),p=f(),b(l,"class","label"),b(s,"class","control"),b(n,"class","field"),this.first=n},m(t,e){i(t,n,e),c(n,l),c(l,o),c(n,r),c(n,s),y.m(s,null),c(n,p)},p(t,n){e=t,y.p(e,n)},d(t){t&&a(n),y.d()}}}function Bt(t,e){let n,l,o,r,s,p,h,y,g,k,w=e[34].label+"";function $(){e[19].call(p,e[34])}return{key:t,first:null,c(){n=u("div"),l=u("p"),o=d(w),r=f(),s=u("div"),p=u("input"),y=f(),b(l,"class","label"),b(p,"class","input"),b(p,"type","text"),b(p,"placeholder",h=e[34].placeholder),b(s,"class","control"),b(n,"class","field"),this.first=n},m(t,a){i(t,n,a),c(n,l),c(l,o),c(n,r),c(n,s),c(s,p),v(p,e[0].network[e[34].symbol]),c(n,y),g||(k=m(p,"input",$),g=!0)},p(t,n){e=t,1025&n[0]&&p.value!==e[0].network[e[34].symbol]&&v(p,e[0].network[e[34].symbol])},d(t){t&&a(n),g=!1,k()}}}function Ut(t){let e,n=[],l=new Map,o=t[11];const r=t=>t[34].symbol;for(let e=0;e<o.length;e+=1){let s=Pt(t,o,e),c=r(s);l.set(c,n[e]=Vt(c,s))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=p()},m(t,l){for(let e=0;e<n.length;e+=1)n[e].m(t,l);i(t,e,l)},p(t,s){2049&s[0]&&(o=t[11],n=B(n,s,r,1,t,o,l,e.parentNode,A,Vt,e,Pt))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&a(e)}}}function Vt(e,n){let l,o,r,s,p,h,g,k,w,$=n[34].label+"",x=n[34].link&&function(e){let n,l,o,r,s,f=e[34].link.label+"";return{c(){n=d("("),l=u("a"),o=d(f),s=d(")"),b(l,"href",r=e[34].link.url),b(l,"target","_blank")},m(t,e){i(t,n,e),i(t,l,e),c(l,o),i(t,s,e)},p:t,d(t){t&&a(n),t&&a(l),t&&a(s)}}}(n),_="number"===n[34].type&&function(t){let e,n,l,o;function r(){t[20].call(e,t[34])}return{c(){e=u("input"),b(e,"class","input"),b(e,"type","number"),b(e,"placeholder",n=t[34].placeholder)},m(n,s){i(n,e,s),v(e,t[0].master[t[34].symbol]),l||(o=m(e,"input",r),l=!0)},p(n,l){t=n,2049&l[0]&&y(e.value)!==t[0].master[t[34].symbol]&&v(e,t[0].master[t[34].symbol])},d(t){t&&a(e),l=!1,o()}}}(n),S="checkbox"===n[34].type&&function(t){let e,n,l,o,r,s,p,h=t[34].label+"";function y(){return t[21](t[34])}return{c(){e=u("label"),n=u("input"),o=f(),r=d(h),b(n,"type","checkbox"),n.checked=l=t[0].master[t[34].symbol],b(e,"class","checkbox")},m(t,l){i(t,e,l),c(e,n),c(e,o),c(e,r),s||(p=m(n,"change",y),s=!0)},p(e,o){t=e,1&o[0]&&l!==(l=t[0].master[t[34].symbol])&&(n.checked=l)},d(t){t&&a(e),s=!1,p()}}}(n),C=!n[34].type&&function(t){let e,n,l,o;function r(){t[22].call(e,t[34])}return{c(){e=u("input"),b(e,"class","input"),b(e,"type","text"),b(e,"placeholder",n=t[34].placeholder)},m(n,s){i(n,e,s),v(e,t[0].master[t[34].symbol]),l||(o=m(e,"input",r),l=!0)},p(n,l){t=n,2049&l[0]&&e.value!==t[0].master[t[34].symbol]&&v(e,t[0].master[t[34].symbol])},d(t){t&&a(e),l=!1,o()}}}(n);return{key:e,first:null,c(){l=u("div"),o=u("p"),r=d($),s=f(),x&&x.c(),p=f(),h=u("div"),_&&_.c(),g=f(),S&&S.c(),k=f(),C&&C.c(),w=f(),b(o,"class","label"),b(h,"class","control"),b(l,"class","field"),this.first=l},m(t,e){i(t,l,e),c(l,o),c(o,r),c(o,s),x&&x.m(o,null),c(l,p),c(l,h),_&&_.m(h,null),c(h,g),S&&S.m(h,null),c(h,k),C&&C.m(h,null),c(l,w)},p(t,e){(n=t)[34].link&&x.p(n,e),"number"===n[34].type&&_.p(n,e),"checkbox"===n[34].type&&S.p(n,e),n[34].type||C.p(n,e)},d(t){t&&a(l),x&&x.d(),_&&_.d(),S&&S.d(),C&&C.d()}}}function Yt(t){let e,n,l,o,r,s,d=[],p=new Map,h=t[0].workers;const y=t=>t[37].id;for(let e=0;e<h.length;e+=1){let n=Nt(t,h,e),l=y(n);p.set(l,d[e]=Wt(l,n))}return{c(){e=u("div"),n=u("button"),n.innerHTML="<span>+</span>",l=f(),o=u("div");for(let t=0;t<d.length;t+=1)d[t].c();b(n,"type","button"),b(n,"class","button is-primary"),b(e,"class","actions"),k(e,"margin-bottom","20px"),b(o,"class","worker-container")},m(a,u){i(a,e,u),c(e,n),i(a,l,u),i(a,o,u);for(let t=0;t<d.length;t+=1)d[t].m(o,null);r||(s=m(n,"click",t[23]),r=!0)},p(t,e){2049&e[0]&&(h=t[0].workers,d=B(d,e,y,1,t,h,p,o,A,Wt,null,Nt))},d(t){t&&a(e),t&&a(l),t&&a(o);for(let t=0;t<d.length;t+=1)d[t].d();r=!1,s()}}}function Gt(e,n){let l,o,r,s,p,h,g,k,w=n[34].label+"",$=n[34].link&&function(e){let n,l,o,r,s,f=e[34].link.label+"";return{c(){n=d("("),l=u("a"),o=d(f),s=d(")"),b(l,"href",r=e[34].link.url),b(l,"target","_blank")},m(t,e){i(t,n,e),i(t,l,e),c(l,o),i(t,s,e)},p:t,d(t){t&&a(n),t&&a(l),t&&a(s)}}}(n),x="number"===n[34].type&&function(t){let e,n,l,o;function r(){t[25].call(e,t[34],t[38],t[39])}return{c(){e=u("input"),b(e,"class","input"),b(e,"type","number"),b(e,"placeholder",n=t[34].placeholder)},m(n,s){i(n,e,s),v(e,t[37][t[34].symbol]),l||(o=m(e,"input",r),l=!0)},p(n,l){t=n,2049&l[0]&&y(e.value)!==t[37][t[34].symbol]&&v(e,t[37][t[34].symbol])},d(t){t&&a(e),l=!1,o()}}}(n),_="checkbox"===n[34].type&&function(t){let e,n,l,o,r,s,p,h=t[34].label+"";function y(){return t[26](t[37],t[34],t[38],t[39])}return{c(){e=u("label"),n=u("input"),o=f(),r=d(h),b(n,"type","checkbox"),n.checked=l=t[37][t[34].symbol],b(e,"class","checkbox")},m(t,l){i(t,e,l),c(e,n),c(e,o),c(e,r),s||(p=m(n,"change",y),s=!0)},p(e,o){t=e,1&o[0]&&l!==(l=t[37][t[34].symbol])&&(n.checked=l)},d(t){t&&a(e),s=!1,p()}}}(n),S=!n[34].type&&function(t){let e,n,l,o;function r(){t[27].call(e,t[34],t[38],t[39])}return{c(){e=u("input"),b(e,"class","input"),b(e,"type","text"),b(e,"placeholder",n=t[34].placeholder)},m(n,s){i(n,e,s),v(e,t[37][t[34].symbol]),l||(o=m(e,"input",r),l=!0)},p(n,l){t=n,2049&l[0]&&e.value!==t[37][t[34].symbol]&&v(e,t[37][t[34].symbol])},d(t){t&&a(e),l=!1,o()}}}(n);return{key:e,first:null,c(){l=u("div"),o=u("p"),r=d(w),s=f(),$&&$.c(),p=f(),h=u("div"),x&&x.c(),g=f(),_&&_.c(),k=f(),S&&S.c(),b(o,"class","label"),b(h,"class","control"),b(l,"class","field"),this.first=l},m(t,e){i(t,l,e),c(l,o),c(o,r),c(o,s),$&&$.m(o,null),c(l,p),c(l,h),x&&x.m(h,null),c(h,g),_&&_.m(h,null),c(h,k),S&&S.m(h,null)},p(t,e){(n=t)[34].link&&$.p(n,e),"number"===n[34].type&&x.p(n,e),"checkbox"===n[34].type&&_.p(n,e),n[34].type||S.p(n,e)},d(t){t&&a(l),$&&$.d(),x&&x.d(),_&&_.d(),S&&S.d()}}}function Wt(t,e){let n,l,o,r,s,p,h,y,v,k,w=e[37].name+"",$=[],x=new Map;function _(){return e[24](e[39])}let S=e[11];const C=t=>t[34].symbol;for(let t=0;t<S.length;t+=1){let n=Et(e,S,t),l=C(n);x.set(l,$[t]=Gt(l,n))}return{key:t,first:null,c(){n=u("div"),l=u("div"),o=u("p"),r=d(w),s=f(),p=u("button"),p.innerHTML="<span>-</span>",h=f();for(let t=0;t<$.length;t+=1)$[t].c();y=f(),b(o,"class","is-size-5 has-text-weight-bold"),b(p,"type","button"),b(p,"class","button is-danger"),b(l,"class","worker-header"),b(n,"class","box"),this.first=n},m(t,e){i(t,n,e),c(n,l),c(l,o),c(o,r),c(l,s),c(l,p),c(n,h);for(let t=0;t<$.length;t+=1)$[t].m(n,null);c(n,y),v||(k=m(p,"click",_),v=!0)},p(t,l){e=t,1&l[0]&&w!==(w=e[37].name+"")&&g(r,w),2049&l[0]&&(S=e[11],$=B($,l,C,1,e,S,x,n,A,Gt,y,Et))},d(t){t&&a(n);for(let t=0;t<$.length;t+=1)$[t].d();v=!1,k()}}}function qt(t){let e,n=[],l=new Map,o=t[12];const r=t=>t[34].symbol;for(let e=0;e<o.length;e+=1){let s=Mt(t,o,e),c=r(s);l.set(c,n[e]=Xt(c,s))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=p()},m(t,l){for(let e=0;e<n.length;e+=1)n[e].m(t,l);i(t,e,l)},p(t,s){4224&s[0]&&(o=t[12],n=B(n,s,r,1,t,o,l,e.parentNode,A,Xt,e,Mt))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&a(e)}}}function Jt(t){let e,n,l;function o(){t[29].call(e,t[34])}return{c(){e=u("input"),b(e,"class","input"),b(e,"type","text"),b(e,"placeholder",t[34].placeholder)},m(r,s){i(r,e,s),v(e,t[7][t[34].symbol]),n||(l=m(e,"input",o),n=!0)},p(n,l){t=n,4224&l[0]&&e.value!==t[7][t[34].symbol]&&v(e,t[7][t[34].symbol])},d(t){t&&a(e),n=!1,l()}}}function Qt(t){let e,n,l;function o(){t[28].call(e,t[34])}return{c(){e=u("input"),b(e,"class","input"),b(e,"type","password"),b(e,"autocomplete","off"),b(e,"placeholder",t[34].placeholder)},m(r,s){i(r,e,s),v(e,t[7][t[34].symbol]),n||(l=m(e,"input",o),n=!0)},p(n,l){t=n,4224&l[0]&&e.value!==t[7][t[34].symbol]&&v(e,t[7][t[34].symbol])},d(t){t&&a(e),n=!1,l()}}}function Xt(t,e){let n,l,o,r,s,p,m=e[34].label+"";let h=function(t,e){return"password"===t[34].type?Qt:Jt}(e),y=h(e);return{key:t,first:null,c(){n=u("div"),l=u("p"),o=d(m),r=f(),s=u("div"),y.c(),p=f(),b(l,"class","label"),b(s,"class","control"),b(n,"class","field"),this.first=n},m(t,e){i(t,n,e),c(n,l),c(l,o),c(n,r),c(n,s),y.m(s,null),c(n,p)},p(t,n){e=t,y.p(e,n)},d(t){t&&a(n),y.d()}}}function Zt(e){let n;return{c(){n=d("Failed to deploy K8S.")},m(t,e){i(t,n,e)},p:t,d(t){t&&a(n)}}}function te(t){let e;return{c(){e=d(t[6])},m(t,n){i(t,e,n)},p(t,n){64&n[0]&&g(e,t[6])},d(t){t&&a(e)}}}function ee(e){let n;return{c(){n=d("> Loading...")},m(t,e){i(t,n,e)},p:t,d(t){t&&a(n)}}}function ne(t){let e,n,l;return{c(){e=d("> "),n=d(t[6]),l=d(".")},m(t,o){i(t,e,o),i(t,n,o),i(t,l,o)},p(t,e){64&e[0]&&g(n,t[6])},d(t){t&&a(e),t&&a(n),t&&a(l)}}}function le(t){let e;return{c(){e=d("Deploy")},m(t,n){i(t,e,n)},d(t){t&&a(e)}}}function oe(t){let e;return{c(){e=d("Back")},m(t,n){i(t,e,n)},d(t){t&&a(e)}}}function re(e){let n,o,r,s,d,p,y,g,v,w,$,x,_,S,C,M;const N=[It,Tt,Ot,Kt],E=[];function P(t,e){return t[2]?0:t[3]?1:t[4]?2:3}function z(t,e){return t[3]||t[4]?oe:le}y=P(e),g=E[y]=N[y](e);let R=z(e),j=R(e);return{c(){n=u("div"),o=u("form"),r=u("h4"),r.textContent="Deploy a Kubernetes",s=f(),d=u("hr"),p=f(),g.c(),v=f(),w=u("div"),$=u("button"),j.c(),this.c=t,b(r,"class","is-size-4"),b($,"class",x="button is-primary "+(e[2]?"is-loading":"")),b($,"type","submit"),$.disabled=_=(e[2]||!e[0].valid)&&!(e[3]||e[4]),b(w,"class","actions"),b(o,"class","box"),k(n,"padding","15px")},m(t,l){i(t,n,l),c(n,o),c(o,r),c(o,s),c(o,d),c(o,p),E[y].m(o,null),c(o,v),c(o,w),c(w,$),j.m($,null),S=!0,C||(M=[m($,"click",e[30]),m(o,"submit",h(e[14]))],C=!0)},p(t,e){let n=y;y=P(t),y===n?E[y].p(t,e):(L={r:0,c:[],p:L},F(E[n],1,1,(()=>{E[n]=null})),L.r||l(L.c),L=L.p,g=E[y],g?g.p(t,e):(g=E[y]=N[y](t),g.c()),H(g,1),g.m(o,v)),R!==(R=z(t))&&(j.d(1),j=R(t),j&&(j.c(),j.m($,null))),(!S||4&e[0]&&x!==(x="button is-primary "+(t[2]?"is-loading":"")))&&b($,"class",x),(!S||29&e[0]&&_!==(_=(t[2]||!t[0].valid)&&!(t[3]||t[4])))&&($.disabled=_)},i(t){S||(H(g),S=!0)},o(t){F(g),S=!1},d(t){t&&a(n),E[y].d(),j.d(),C=!1,l(M)}}}function se(t,e,n){let l;var o,r;const{events:c}=null!==(r=null===(o=window.configs)||void 0===o?void 0:o.grid3_client)&&void 0!==r?r:{},i=new at,a=i.configs;s(t,a,(t=>n(7,l=t)));const u=[{label:"Name",symbol:"name",placeholder:"Your K8S Name"},{label:"Cluster Token",symbol:"secret",placeholder:"Your Cluster Token"},{label:"Public SSH Key",symbol:"sshKey",placeholder:"Your Public SSH Key"}],d=[{label:"Network Name",symbol:"name",placeholder:"Your Network Name"},{label:"Network IP Range",symbol:"ipRange",placeholder:"Your Network IP Range"}],f=[{label:"Name",symbol:"name",placeholder:"Enter name"},{label:"CPU",symbol:"cpu",placeholder:"CPU",type:"number"},{label:"Memory",symbol:"memory",placeholder:"Memory in MB",type:"number"},{label:"Disk Size",symbol:"diskSize",placeholder:"Disk size in GB",type:"number"},{label:"Public IP",symbol:"publicIp",placeholder:"",type:"checkbox"},{label:"Plantery Network",symbol:"plantery",placeholder:"",type:"checkbox"},{label:"Node ID",symbol:"node",placeholder:"Node ID",type:"number",link:{label:"Grid Explorer",url:"https://explorer.tfchain.dev.threefold.io/nodes"}}],p=[{label:"Mnemonics",symbol:"mnemonics",placeholder:"Mnemonics of your tfchain account"},{label:"Store Secret",symbol:"storeSecret",placeholder:"secret key used for data encryption"}];let m,h,b="Config",g=!1,v=!1,k=!1;return[i,b,g,v,k,m,h,l,a,u,d,f,p,[{label:"Config"},{label:"Master"},{label:"Workers"}],function(){function t(t){"string"==typeof t&&n(6,h=t)}n(2,g=!0),n(3,v=!1),n(4,k=!1),n(6,h=void 0),c.addListener("logs",t),vt(i,m).then((()=>n(3,v=!0))).catch((t=>{n(4,k=!0),n(6,h=t.message)})).finally((()=>{n(2,g=!1),c.removeListener("logs",t)}))},t=>n(5,m=t.detail),t=>n(1,b=t.label),function(t){i[t.symbol]=this.value,n(0,i),n(9,u)},function(t){i[t.symbol]=this.value,n(0,i),n(9,u)},function(t){i.network[t.symbol]=this.value,n(0,i),n(10,d)},function(t){i.master[t.symbol]=y(this.value),n(0,i),n(11,f)},t=>n(0,i.master[t.symbol]=!i.master[t.symbol],i),function(t){i.master[t.symbol]=this.value,n(0,i),n(11,f)},()=>n(0,i.workers=[...i.workers,new ct],i),t=>n(0,i.workers=i.workers.filter(((e,n)=>t!==n)),i),function(t,e,l){e[l][t.symbol]=y(this.value),n(0,i),n(11,f)},(t,e,l,o)=>n(0,l[o][e.symbol]=!t[e.symbol],i),function(t,e,l){e[l][t.symbol]=this.value,n(0,i),n(11,f)},function(t){l[t.symbol]=this.value,a.set(l),n(12,p)},function(t){l[t.symbol]=this.value,a.set(l),n(12,p)},t=>{(v||k)&&(t.preventDefault(),n(3,v=!1),n(4,k=!1),n(2,g=!1))}]}!function(t,e){try{customElements.define(`tf-${t}`,e)}catch(e){console.warn(`Element with name '${t}' already defined.`)}}("kubernetes",class extends D{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");.worker-container{overflow-x:hidden;overflow-y:auto;max-height:70vh;will-change:transform;padding-bottom:5rem;margin-bottom:20px}.actions,.worker-header{display:flex;justify-content:flex-end;align-items:center}.worker-header{justify-content:space-between}</style>',G(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},se,re,r,{},null,[-1,-1]),t&&t.target&&i(t.target,this,t.anchor)}})}();
