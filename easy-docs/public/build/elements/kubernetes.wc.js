!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,s){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function l(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(){return d("")}function m(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function h(t){return function(e){return e.preventDefault(),t.call(this,e)}}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function y(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}function v(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function w(t){const e={};for(const n of t)e[n.name]=n.value;return e}let k;function x(t){k=t}function _(){if(!k)throw new Error("Function called outside component initialization");return k}function S(){const t=_();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const o=function(t,e,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,!1,e),s}(e,n);s.slice().forEach((e=>{e.call(t,o)}))}}}function E(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const N=[],M=[],R=[],C=[],z=Promise.resolve();let P=!1;function K(t){R.push(t)}function L(t){C.push(t)}let T=!1;const O=new Set;function j(){if(!T){T=!0;do{for(let t=0;t<N.length;t+=1){const e=N[t];x(e),A(e.$$)}for(x(null),N.length=0;M.length;)M.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];O.has(e)||(O.add(e),e())}R.length=0}while(N.length);for(;C.length;)C.pop()();P=!1,T=!1,O.clear()}}function A(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}const D=new Set;let F,H;function I(){F={r:0,c:[],p:F}}function Y(){F.r||s(F.c),F=F.p}function q(t,e){t&&t.i&&(D.delete(t),t.i(e))}function B(t,e,n,s){if(t&&t.o){if(D.has(t))return;D.add(t),F.c.push((()=>{D.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function U(t,e){t.d(1),e.delete(t.key)}function V(t,e){B(t,1,1,(()=>{e.delete(t.key)}))}function X(t,e,n,s,o,r,i,l,c,a,u,d){let f=t.length,p=r.length,m=f;const h={};for(;m--;)h[t[m].key]=m;const $=[],g=new Map,b=new Map;for(m=p;m--;){const t=d(o,r,m),l=n(t);let c=i.get(l);c?s&&c.p(t,e):(c=a(l,t),c.c()),g.set(l,$[m]=c),l in h&&b.set(l,Math.abs(m-h[l]))}const y=new Set,v=new Set;function w(t){q(t,1),t.m(l,u),i.set(t.key,t),u=t.first,p--}for(;f&&p;){const e=$[p-1],n=t[f-1],s=e.key,o=n.key;e===n?(u=e.first,f--,p--):g.has(o)?!i.has(s)||y.has(s)?w(e):v.has(o)?f--:b.get(s)>b.get(o)?(v.add(s),w(e)):(y.add(o),f--):(c(n,i),f--)}for(;f--;){const e=t[f];g.has(e.key)||c(e,i)}for(;p;)w($[p-1]);return $}function G(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function J(t){t&&t.c()}function W(t,n,r,i){const{fragment:l,on_mount:c,on_destroy:a,after_update:u}=t.$$;l&&l.m(n,r),i||K((()=>{const n=c.map(e).filter(o);a?a.push(...n):s(n),t.$$.on_mount=[]})),u.forEach(K)}function Q(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(t,e){-1===t.$$.dirty[0]&&(N.push(t),P||(P=!0,z.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function tt(e,o,r,i,l,c,u,d=[-1]){const f=k;x(e);const p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||f.$$.root};u&&u(p.root);let m=!1;if(p.ctx=r?r(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),m&&Z(e,t)),n})):[],p.update(),m=!0,s(p.before_update),p.fragment=!!i&&i(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();o.intro&&q(e.$$.fragment),W(e,o.target,o.anchor,o.customElement),j()}x(f)}var et;"function"==typeof HTMLElement&&(H=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(o);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){Q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var nt=new Uint8Array(16);function st(){if(!et&&!(et="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return et(nt)}var ot=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function rt(t){return"string"==typeof t&&ot.test(t)}for(var it,lt,ct=[],at=0;at<256;++at)ct.push((at+256).toString(16).substr(1));function ut(t,e,n){var s=(t=t||{}).random||(t.rng||st)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=s[o];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ct[t[e+0]]+ct[t[e+1]]+ct[t[e+2]]+ct[t[e+3]]+"-"+ct[t[e+4]]+ct[t[e+5]]+"-"+ct[t[e+6]]+ct[t[e+7]]+"-"+ct[t[e+8]]+ct[t[e+9]]+"-"+ct[t[e+10]]+ct[t[e+11]]+ct[t[e+12]]+ct[t[e+13]]+ct[t[e+14]]+ct[t[e+15]]).toLowerCase();if(!rt(n))throw TypeError("Stringified UUID is invalid");return n}(s)}function dt(t,e,n){const s=t.slice();return s[14]=e[n],s}function ft(t){let e,n;function s(t,n){return null==e&&(e=!!t[3]()),e?ht:"checkbox"===t[1].type?mt:"select"===t[1].type?pt:void 0}let o=s(t),r=o&&o(t);return{c(){r&&r.c(),n=p()},m(t,e){r&&r.m(t,e),c(t,n,e)},p(t,e){o===(o=s(t))&&r?r.p(t,e):(r&&r.d(1),r=o&&o(t),r&&(r.c(),r.m(n.parentNode,n)))},d(t){r&&r.d(t),t&&a(n)}}}function pt(t){let e,n,o,r,i,d=[],p=new Map,h=t[1].label&&$t(t),g=t[1].options;const b=t=>t[14].value;for(let e=0;e<g.length;e+=1){let n=dt(t,g,e),s=b(n);p.set(s,d[e]=gt(s,n))}return{c(){h&&h.c(),e=f(),n=u("div"),o=u("select");for(let t=0;t<d.length;t+=1)d[t].c();void 0===t[0][t[1].symbol]&&K((()=>t[13].call(o))),$(n,"class","select mb-2"),$(n,"id",t[4])},m(s,a){h&&h.m(s,a),c(s,e,a),c(s,n,a),l(n,o);for(let t=0;t<d.length;t+=1)d[t].m(o,null);v(o,t[0][t[1].symbol]),r||(i=[m(o,"change",t[8]),m(o,"change",t[13])],r=!0)},p(t,n){t[1].label?h?h.p(t,n):(h=$t(t),h.c(),h.m(e.parentNode,e)):h&&(h.d(1),h=null),2&n&&(g=t[1].options,d=X(d,n,b,1,t,g,p,o,U,gt,null,dt)),3&n&&v(o,t[0][t[1].symbol])},d(t){h&&h.d(t),t&&a(e),t&&a(n);for(let t=0;t<d.length;t+=1)d[t].d();r=!1,s(i)}}}function mt(t){let e,n,o,r,i,p,h,b,v,w,k=t[1].label+"";return{c(){e=u("div"),n=u("label"),o=u("input"),r=f(),i=u("span"),p=f(),h=u("label"),b=d(k),$(o,"type","checkbox"),$(o,"id",t[4]),$(i,"class","slider"),$(n,"class","switch"),$(h,"for",t[4]),$(h,"class","label ml-2"),y(h,"cursor","pointer"),y(e,"display","flex"),y(e,"align-items","center"),$(e,"class","mb-2")},m(s,a){c(s,e,a),l(e,n),l(n,o),o.checked=t[0][t[1].symbol],l(n,r),l(n,i),l(e,p),l(e,h),l(h,b),v||(w=[m(o,"change",t[12]),m(o,"change",t[7])],v=!0)},p(t,e){3&e&&(o.checked=t[0][t[1].symbol]),2&e&&k!==(k=t[1].label+"")&&g(b,k)},d(t){t&&a(e),v=!1,s(w)}}}function ht(t){let e,n,s,o,r,i=t[1].label+"";function p(t,e){return"textarea"===t[1].type?yt:bt}let m=p(t),h=m(t);return{c(){e=u("div"),n=u("p"),s=d(i),o=f(),r=u("div"),h.c(),$(n,"class","label"),$(r,"class","control"),$(e,"class","field"),$(e,"id",t[4])},m(t,i){c(t,e,i),l(e,n),l(n,s),l(e,o),l(e,r),h.m(r,null)},p(t,e){2&e&&i!==(i=t[1].label+"")&&g(s,i),m===(m=p(t))&&h?h.p(t,e):(h.d(1),h=m(t),h&&(h.c(),h.m(r,null)))},d(t){t&&a(e),h.d()}}}function $t(t){let e,n,s=t[1].label+"";return{c(){e=u("p"),n=d(s),$(e,"class","label")},m(t,s){c(t,e,s),l(e,n)},p(t,e){2&e&&s!==(s=t[1].label+"")&&g(n,s)},d(t){t&&a(e)}}}function gt(t,e){let n,s,o,r,i,p,m=e[14].label+"";return{key:t,first:null,c(){n=u("option"),s=d(m),o=f(),n.__value=r=e[14].value,n.value=n.__value,n.selected=i=e[14].selected,n.disabled=p=e[14].disabled,this.first=n},m(t,e){c(t,n,e),l(n,s),l(n,o)},p(t,o){e=t,2&o&&m!==(m=e[14].label+"")&&g(s,m),2&o&&r!==(r=e[14].value)&&(n.__value=r,n.value=n.__value),2&o&&i!==(i=e[14].selected)&&(n.selected=i),2&o&&p!==(p=e[14].disabled)&&(n.disabled=p)},d(t){t&&a(n)}}}function bt(t){let e,n,o,r;return{c(){e=u("input"),$(e,"class","input"),$(e,"placeholder",n=t[1].placeholder)},m(n,s){c(n,e,s),t[10](e),b(e,t[0][t[1].symbol]),o||(r=[m(e,"input",t[11]),m(e,"change",t[6])],o=!0)},p(t,s){2&s&&n!==(n=t[1].placeholder)&&$(e,"placeholder",n),3&s&&e.value!==t[0][t[1].symbol]&&b(e,t[0][t[1].symbol])},d(n){n&&a(e),t[10](null),o=!1,s(r)}}}function yt(t){let e,n,o,r;return{c(){e=u("textarea"),$(e,"class","textarea"),$(e,"placeholder",n=t[1].placeholder)},m(n,s){c(n,e,s),b(e,t[0][t[1].symbol]),o||(r=[m(e,"input",t[9]),m(e,"change",t[5])],o=!0)},p(t,s){2&s&&n!==(n=t[1].placeholder)&&$(e,"placeholder",n),3&s&&b(e,t[0][t[1].symbol])},d(t){t&&a(e),o=!1,s(r)}}}function vt(e){let n,s=e[1]&&ft(e);return{c(){s&&s.c(),n=p(),this.c=t},m(t,e){s&&s.m(t,e),c(t,n,e)},p(t,[e]){t[1]?s?s.p(t,e):(s=ft(t),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:t,o:t,d(t){s&&s.d(t),t&&a(n)}}}function wt(t,e,n){let s,{field:o}=e,{data:r}=e;const i=ut();var l;return l=()=>{s&&n(2,s.type=o.type,s)},_().$$.on_mount.push(l),t.$$set=t=>{"field"in t&&n(1,o=t.field),"data"in t&&n(0,r=t.data)},[r,o,s,()=>["text","number","password","textarea"].includes(o.type),i,function(e){E.call(this,t,e)},function(e){E.call(this,t,e)},function(e){E.call(this,t,e)},function(e){E.call(this,t,e)},function(){r[o.symbol]=this.value,n(0,r),n(1,o)},function(t){M[t?"unshift":"push"]((()=>{s=t,n(2,s)}))},function(){r[o.symbol]=this.value,n(0,r),n(1,o)},function(){r[o.symbol]=this.checked,n(0,r),n(1,o)},function(){r[o.symbol]=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(0,r),n(1,o)}]}class kt extends H{constructor(t){super(),this.shadowRoot.innerHTML='<style>.select,.select>select{width:100%}.switch{position:relative;display:inline-block;width:60px;height:34px}.switch input{opacity:0;width:0;height:0}.switch .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:0.4s;transition:0.4s;border-radius:34px}.switch .slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:white;-webkit-transition:0.4s;transition:0.4s;border-radius:50%}.switch input:checked+.slider{background-color:#2196f3}.switch input:checked+.slider{box-shadow:0 0 1px #2196f3}.switch input:checked+.slider:before{-webkit-transform:translateX(26px);-ms-transform:translateX(26px);transform:translateX(26px)}</style>',tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},wt,vt,r,{field:1,data:0},null),t&&(t.target&&c(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["field","data"]}get field(){return this.$$.ctx[1]}set field(t){this.$$set({field:t}),j()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),j()}}function xt(t,e,n){const s=t.slice();return s[3]=e[n],s}function _t(t){let e,n,s=[],o=new Map,r=t[1];const i=t=>t[3].symbol;for(let e=0;e<r.length;e+=1){let n=xt(t,r,e),l=i(n);o.set(l,s[e]=St(l,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=p()},m(t,o){for(let e=0;e<s.length;e+=1)s[e].m(t,o);c(t,e,o),n=!0},p(t,n){3&n&&(r=t[1],I(),s=X(s,n,i,1,t,r,o,e.parentNode,V,St,e,xt),Y())},i(t){if(!n){for(let t=0;t<r.length;t+=1)q(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)B(s[t]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&a(e)}}}function St(t,e){let n,s,o,r;function i(t){e[2](t)}let l={field:e[3]};return void 0!==e[0]&&(l.data=e[0]),s=new kt({props:l}),M.push((()=>G(s,"data",i))),{key:t,first:null,c(){n=p(),J(s.$$.fragment),this.first=n},m(t,e){c(t,n,e),W(s,t,e),r=!0},p(t,n){e=t;const r={};2&n&&(r.field=e[3]),!o&&1&n&&(o=!0,r.data=e[0],L((()=>o=!1))),s.$set(r)},i(t){r||(q(s.$$.fragment,t),r=!0)},o(t){B(s.$$.fragment,t),r=!1},d(t){t&&a(n),Q(s,t)}}}function Et(e){let n,s,o=e[1]&&e[0]&&_t(e);return{c(){o&&o.c(),n=p(),this.c=t},m(t,e){o&&o.m(t,e),c(t,n,e),s=!0},p(t,[e]){t[1]&&t[0]?o?(o.p(t,e),3&e&&q(o,1)):(o=_t(t),o.c(),q(o,1),o.m(n.parentNode,n)):o&&(I(),B(o,1,1,(()=>{o=null})),Y())},i(t){s||(q(o),s=!0)},o(t){B(o),s=!1},d(t){o&&o.d(t),t&&a(n)}}}function Nt(t,e,n){let{fields:s}=e,{data:o}=e;return t.$$set=t=>{"fields"in t&&n(1,s=t.fields),"data"in t&&n(0,o=t.data)},[o,s,function(t){o=t,n(0,o)}]}customElements.define("tf-input",kt);class Mt extends H{constructor(t){super(),tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Nt,Et,r,{fields:1,data:0},null),t&&(t.target&&c(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["fields","data"]}get fields(){return this.$$.ctx[1]}set fields(t){this.$$set({fields:t}),j()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),j()}}function Rt(t){const e=+t;return"number"==typeof e&&!isNaN(e)&&e>=0&&e.toFixed(0)===e.toString()}customElements.define("tf-inputs",Mt);class Ct{constructor(t=ut(),e="vm_"+t.split("-")[0],n=0,s=0,o=100,r=!1,i=0,l=25,c=!0){this.id=t,this.name=e,this.node=n,this.cpu=s,this.diskSize=o,this.publicIp=r,this.memory=i,this.rootFsSize=l,this.plantery=c}get valid(){const{name:t,node:e,cpu:n,diskSize:s,memory:o,rootFsSize:r}=this;return""!==t&&Rt(e)&&Rt(n)&&Rt(s)&&Rt(o)&&Rt(r)}}class zt extends Ct{}class Pt extends Ct{}class Kt{constructor(t="nw_"+ut().split("-")[0],e="10.20.0.0/16"){this.name=t,this.ipRange=e}get valid(){const{name:t,ipRange:e}=this;return""!==t&&""!==e}}class Lt{constructor(t=ut(),e=new zt,n=[new Pt],s=new Kt,o="",r="",i="",l="",c=""){this.id=t,this.master=e,this.workers=n,this.network=s,this.name=o,this.secret=r,this.sshKey=i,this.metadata=l,this.description=c}get valid(){const{secret:t,sshKey:e,master:n,workers:s,network:o}=this;return""!==t&&""!==e&&n.valid&&o.valid&&s.reduce(((t,e)=>t&&e.valid),!0)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */const{NetworkModel:Tt}=null!==(lt=null===(it=window.configs)||void 0===it?void 0:it.grid3_client)&&void 0!==lt?lt:{};var Ot,jt,At,Dt;const{HTTPMessageBusClient:Ft}=null!==(jt=null===(Ot=window.configs)||void 0===Ot?void 0:Ot.client)&&void 0!==jt?jt:{},{GridClient:Ht,K8SModel:It,KubernetesNodeModel:Yt}=null!==(Dt=null===(At=window.configs)||void 0===At?void 0:At.grid3_client)&&void 0!==Dt?Dt:{};async function qt(t,e){const{master:n,workers:s,network:o}=t,r=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]])}return n}(t,["master","workers","network"]),{secret:i,sshKey:l,description:c,metadata:a,name:u}=r,{mnemonics:d,storeSecret:f,networkEnv:p}=e,m=new Ft(0,""),h=new Ht(p,d,f,m,void 0,"tfkvstore"),$=[Bt(n)],g=s.map(Bt),b=new It;return b.name=u,b.secret=i,b.network=function(t){const e=new Tt;return e.name=t.name,e.ip_range=t.ipRange,e}(o),b.masters=$,b.workers=g,b.metadata=a,b.description=c,b.ssh_key=l,h.connect().then((()=>h.k8s.deploy(b)))}function Bt(t){const e=new Yt;return e.name=t.name,e.node_id=t.node,e.cpu=t.cpu,e.disk_size=t.diskSize,e.memory=t.memory,e.public_ip=t.publicIp,e.rootfs_size=t.rootFsSize,e.planetary=t.plantery,e}function Ut(e){let n,s,o,r,i;function d(t){e[6](t)}let f={field:{type:"select",symbol:"selected",options:e[1]}};return void 0!==e[0]&&(f.data=e[0]),o=new kt({props:f}),M.push((()=>G(o,"data",d))),o.$on("change",e[7]),{c(){n=u("div"),s=u("div"),J(o.$$.fragment),this.c=t,$(n,"class","select-profile")},m(t,e){c(t,n,e),l(n,s),W(o,s,null),i=!0},p(t,[e]){const n={};2&e&&(n.field={type:"select",symbol:"selected",options:t[1]}),!r&&1&e&&(r=!0,n.data=t[0],L((()=>r=!1))),o.$set(n)},i(t){i||(q(o.$$.fragment,t),i=!0)},o(t){B(o.$$.fragment,t),i=!1},d(t){t&&a(n),Q(o)}}}function Vt(t,e,n){let s;var o;let r={selected:"0"};const l=null===(o=window.configs)||void 0===o?void 0:o.baseConfig;let c;i(t,l,(t=>n(5,s=t)));let a=[],{profile:u}=e;return t.$$set=t=>{"profile"in t&&n(3,u=t.profile)},t.$$.update=()=>{49&t.$$.dirty&&l&&(n(4,c=s),n(1,a=c.map(((t,e)=>({label:t.name||`Profile ${e+1}`,value:e.toString()})))),n(3,u=c[r.selected]))},[r,a,l,u,c,s,function(t){r=t,n(0,r)},function(e){E.call(this,t,e)}]}class Xt extends H{constructor(t){super(),this.shadowRoot.innerHTML="<style>.select-profile{display:flex;justify-content:flex-end}</style>",tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Vt,Ut,r,{profile:3},null),t&&(t.target&&c(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["profile"]}get profile(){return this.$$.ctx[3]}set profile(t){this.$$set({profile:t}),j()}}function Gt(t,e,n){return()=>{t(n,e)}}function Jt(t,e,n){const s=t.slice();return s[4]=e[n],s}function Wt(t){let e,n=[],s=new Map,o=t[0];const r=t=>t[4].label;for(let e=0;e<o.length;e+=1){let i=Jt(t,o,e),l=r(i);s.set(l,n[e]=Qt(l,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=p()},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);c(t,e,s)},p(t,i){11&i&&(o=t[0],n=X(n,i,r,1,t,o,s,e.parentNode,U,Qt,e,Jt))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&a(e)}}}function Qt(t,e){let n,s,r,i,p,b,y,v,w=e[4].label+"";return{key:t,first:null,c(){n=u("li"),s=u("a"),r=u("span"),i=d(w),p=f(),$(s,"href","#!"),$(n,"class",b=e[1]===e[4].value?"is-active":""),this.first=n},m(t,a){c(t,n,a),l(n,s),l(s,r),l(r,i),l(n,p),y||(v=m(s,"click",h((function(){o(Gt(e[3],e[4].value,"click"))&&Gt(e[3],e[4].value,"click").apply(this,arguments)}))),y=!0)},p(t,s){e=t,1&s&&w!==(w=e[4].label+"")&&g(i,w),3&s&&b!==(b=e[1]===e[4].value?"is-active":"")&&$(n,"class",b)},d(t){t&&a(n),y=!1,v()}}}function Zt(e){let n,s,o,r=e[0]&&Wt(e);return{c(){n=u("div"),s=u("ul"),r&&r.c(),this.c=t,$(n,"class",o="tabs "+(e[2]?"is-centered":""))},m(t,e){c(t,n,e),l(n,s),r&&r.m(s,null)},p(t,[e]){t[0]?r?r.p(t,e):(r=Wt(t),r.c(),r.m(s,null)):r&&(r.d(1),r=null),4&e&&o!==(o="tabs "+(t[2]?"is-centered":""))&&$(n,"class",o)},i:t,o:t,d(t){t&&a(n),r&&r.d()}}}function te(t,e,n){const s=S();let{tabs:o}=e,{active:r}=e,{centered:i=!0}=e;return t.$$set=t=>{"tabs"in t&&n(0,o=t.tabs),"active"in t&&n(1,r=t.active),"centered"in t&&n(2,i=t.centered)},[o,r,i,s]}customElements.define("tf-select-profile",Xt);class ee extends H{constructor(t){super(),tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},te,Zt,r,{tabs:0,active:1,centered:2},null),t&&(t.target&&c(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["tabs","active","centered"]}get tabs(){return this.$$.ctx[0]}set tabs(t){this.$$set({tabs:t}),j()}get active(){return this.$$.ctx[1]}set active(t){this.$$set({active:t}),j()}get centered(){return this.$$.ctx[2]}set centered(t){this.$$set({centered:t}),j()}}function ne(e){let n,s,o,r;return{c(){n=u("div"),s=d("/> "),o=d(e[1]),this.c=t,$(n,"class",r="notification is-"+e[0])},m(t,e){c(t,n,e),l(n,s),l(n,o)},p(t,[e]){2&e&&g(o,t[1]),1&e&&r!==(r="notification is-"+t[0])&&$(n,"class",r)},i:t,o:t,d(t){t&&a(n)}}}function se(t,e,n){let{type:s}=e,{message:o}=e;return t.$$set=t=>{"type"in t&&n(0,s=t.type),"message"in t&&n(1,o=t.message)},[s,o]}customElements.define("tf-tabs",ee);class oe extends H{constructor(t){super(),tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},se,ne,r,{type:0,message:1},null),t&&(t.target&&c(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["type","message"]}get type(){return this.$$.ctx[0]}set type(t){this.$$set({type:t}),j()}get message(){return this.$$.ctx[1]}set message(t){this.$$set({message:t}),j()}}function re(t,e,n){const s=t.slice();return s[5]=e[n],s[7]=n,s}function ie(t){let e,n,s=[],o=new Map,r=t[0];const i=t=>t[5].id;for(let e=0;e<r.length;e+=1){let n=re(t,r,e),l=i(n);o.set(l,s[e]=le(l,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=p()},m(t,o){for(let e=0;e<s.length;e+=1)s[e].m(t,o);c(t,e,o),n=!0},p(t,n){3&n&&(r=t[0],I(),s=X(s,n,i,1,t,r,o,e.parentNode,V,le,e,re),Y())},i(t){if(!n){for(let t=0;t<r.length;t+=1)q(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)B(s[t]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&a(e)}}}function le(t,e){let n,s,o,r,i,p,h,b,y,v,w,k,x,_=e[5].name+"";function S(){return e[3](e[7])}function E(t){e[4](t)}let N={fields:e[1]};return void 0!==e[0]&&(N.data=e[0]),b=new Mt({props:N}),M.push((()=>G(b,"data",E))),{key:t,first:null,c(){n=u("div"),s=u("div"),o=u("p"),r=d(_),i=f(),p=u("button"),p.innerHTML="<span>-</span>",h=f(),J(b.$$.fragment),v=f(),$(o,"class","is-size-5 has-text-weight-bold"),$(p,"type","button"),$(p,"class","button is-danger"),$(s,"class","worker-header"),$(n,"class","box"),this.first=n},m(t,e){c(t,n,e),l(n,s),l(s,o),l(o,r),l(s,i),l(s,p),l(n,h),W(b,n,null),l(n,v),w=!0,k||(x=m(p,"click",S),k=!0)},p(t,n){e=t,(!w||1&n)&&_!==(_=e[5].name+"")&&g(r,_);const s={};2&n&&(s.fields=e[1]),!y&&1&n&&(y=!0,s.data=e[0],L((()=>y=!1))),b.$set(s)},i(t){w||(q(b.$$.fragment,t),w=!0)},o(t){B(b.$$.fragment,t),w=!1},d(t){t&&a(n),Q(b),k=!1,x()}}}function ce(e){let n,s,o,r,i,d,p,h=e[0]&&ie(e);return{c(){n=u("div"),s=u("button"),s.innerHTML="<span>+</span>",o=f(),r=u("div"),h&&h.c(),this.c=t,$(s,"type","button"),$(s,"class","button is-primary"),$(n,"class","actions"),$(r,"class","worker-container")},m(t,a){c(t,n,a),l(n,s),c(t,o,a),c(t,r,a),h&&h.m(r,null),i=!0,d||(p=m(s,"click",e[2]),d=!0)},p(t,[e]){t[0]?h?(h.p(t,e),1&e&&q(h,1)):(h=ie(t),h.c(),q(h,1),h.m(r,null)):h&&(I(),B(h,1,1,(()=>{h=null})),Y())},i(t){i||(q(h),i=!0)},o(t){B(h),i=!1},d(t){t&&a(n),t&&a(o),t&&a(r),h&&h.d(),d=!1,p()}}}function ae(t,e,n){let{nodes:s}=e,{fields:o}=e;return t.$$set=t=>{"nodes"in t&&n(0,s=t.nodes),"fields"in t&&n(1,o=t.fields)},[s,o,function(e){E.call(this,t,e)},t=>n(0,s=s.filter(((e,n)=>t!==n))),function(t){s=t,n(0,s)}]}customElements.define("tf-alert",oe);class ue extends H{constructor(t){super(),this.shadowRoot.innerHTML="<style>.worker-container{overflow-x:hidden;overflow-y:auto;max-height:70vh;will-change:transform;padding-bottom:5rem;margin-bottom:20px}.actions{display:flex;justify-content:flex-end;align-items:center;margin-bottom:20px}.worker-header{display:flex;justify-content:space-between;align-items:center}</style>",tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},ae,ce,r,{nodes:0,fields:1},null),t&&(t.target&&c(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["nodes","fields"]}get nodes(){return this.$$.ctx[0]}set nodes(t){this.$$set({nodes:t}),j()}get fields(){return this.$$.ctx[1]}set fields(t){this.$$set({fields:t}),j()}}function de(t){let e,n,s,o,r,i,l,u,m,h,$,b="active = "+t[1];function y(e){t[12](e)}let v={};void 0!==t[5]&&(v.profile=t[5]),e=new Xt({props:v}),M.push((()=>G(e,"profile",y))),o=new ee({props:{active:t[1],tabs:t[10]}}),o.$on("click",t[13]);let w="config"===t[1]&&he(t),k="master"===t[1]&&$e(t),x="workers"===t[1]&&ge(t);return{c(){J(e.$$.fragment),s=f(),J(o.$$.fragment),r=f(),i=d(b),l=f(),w&&w.c(),u=f(),k&&k.c(),m=f(),x&&x.c(),h=p()},m(t,n){W(e,t,n),c(t,s,n),W(o,t,n),c(t,r,n),c(t,i,n),c(t,l,n),w&&w.m(t,n),c(t,u,n),k&&k.m(t,n),c(t,m,n),x&&x.m(t,n),c(t,h,n),$=!0},p(t,s){const r={};!n&&32&s&&(n=!0,r.profile=t[5],L((()=>n=!1))),e.$set(r);const l={};2&s&&(l.active=t[1]),o.$set(l),(!$||2&s)&&b!==(b="active = "+t[1])&&g(i,b),"config"===t[1]?w?(w.p(t,s),2&s&&q(w,1)):(w=he(t),w.c(),q(w,1),w.m(u.parentNode,u)):w&&(I(),B(w,1,1,(()=>{w=null})),Y()),"master"===t[1]?k?(k.p(t,s),2&s&&q(k,1)):(k=$e(t),k.c(),q(k,1),k.m(m.parentNode,m)):k&&(I(),B(k,1,1,(()=>{k=null})),Y()),"workers"===t[1]?x?(x.p(t,s),2&s&&q(x,1)):(x=ge(t),x.c(),q(x,1),x.m(h.parentNode,h)):x&&(I(),B(x,1,1,(()=>{x=null})),Y())},i(t){$||(q(e.$$.fragment,t),q(o.$$.fragment,t),q(w),q(k),q(x),$=!0)},o(t){B(e.$$.fragment,t),B(o.$$.fragment,t),B(w),B(k),B(x),$=!1},d(t){Q(e,t),t&&a(s),Q(o,t),t&&a(r),t&&a(i),t&&a(l),w&&w.d(t),t&&a(u),k&&k.d(t),t&&a(m),x&&x.d(t),t&&a(h)}}}function fe(t){let e,n;return e=new oe({props:{type:"danger",message:t[6]||"Failed to deploy K8S."}}),{c(){J(e.$$.fragment)},m(t,s){W(e,t,s),n=!0},p(t,n){const s={};64&n&&(s.message=t[6]||"Failed to deploy K8S."),e.$set(s)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function pe(e){let n,s;return n=new oe({props:{type:"success",message:"Successfully deployed K8S."}}),{c(){J(n.$$.fragment)},m(t,e){W(n,t,e),s=!0},p:t,i(t){s||(q(n.$$.fragment,t),s=!0)},o(t){B(n.$$.fragment,t),s=!1},d(t){Q(n,t)}}}function me(t){let e,n;return e=new oe({props:{type:"info",message:t[6]||"Loading..."}}),{c(){J(e.$$.fragment)},m(t,s){W(e,t,s),n=!0},p(t,n){const s={};64&n&&(s.message=t[6]||"Loading..."),e.$set(s)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function he(t){let e,n,s,o,r,i;function l(e){t[14](e)}let u={fields:t[7]};function d(e){t[15](e)}void 0!==t[0]&&(u.data=t[0]),e=new Mt({props:u}),M.push((()=>G(e,"data",l)));let p={fields:t[8]};return void 0!==t[0].network&&(p.data=t[0].network),o=new Mt({props:p}),M.push((()=>G(o,"data",d))),{c(){J(e.$$.fragment),s=f(),J(o.$$.fragment)},m(t,n){W(e,t,n),c(t,s,n),W(o,t,n),i=!0},p(t,s){const i={};!n&&1&s&&(n=!0,i.data=t[0],L((()=>n=!1))),e.$set(i);const l={};!r&&1&s&&(r=!0,l.data=t[0].network,L((()=>r=!1))),o.$set(l)},i(t){i||(q(e.$$.fragment,t),q(o.$$.fragment,t),i=!0)},o(t){B(e.$$.fragment,t),B(o.$$.fragment,t),i=!1},d(t){Q(e,t),t&&a(s),Q(o,t)}}}function $e(t){let e,n,s;function o(e){t[16](e)}let r={fields:t[9]};return void 0!==t[0].master&&(r.data=t[0].master),e=new Mt({props:r}),M.push((()=>G(e,"data",o))),{c(){J(e.$$.fragment)},m(t,n){W(e,t,n),s=!0},p(t,s){const o={};!n&&1&s&&(n=!0,o.data=t[0].master,L((()=>n=!1))),e.$set(o)},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){B(e.$$.fragment,t),s=!1},d(t){Q(e,t)}}}function ge(t){let e,n,s;function o(e){t[17](e)}let r={fields:t[9]};return void 0!==t[0].workers&&(r.nodes=t[0].workers),e=new ue({props:r}),M.push((()=>G(e,"nodes",o))),e.$on("click",t[18]),{c(){J(e.$$.fragment)},m(t,n){W(e,t,n),s=!0},p(t,s){const o={};!n&&1&s&&(n=!0,o.nodes=t[0].workers,L((()=>n=!1))),e.$set(o)},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){B(e.$$.fragment,t),s=!1},d(t){Q(e,t)}}}function be(t){let e;return{c(){e=d("Deploy")},m(t,n){c(t,e,n)},d(t){t&&a(e)}}}function ye(t){let e;return{c(){e=d("Back")},m(t,n){c(t,e,n)},d(t){t&&a(e)}}}function ve(e){let n,o,r,i,p,b,v,w,k,x,_,S,E,N,M,R,C,z,P=JSON.stringify(e[0])+"";const K=[me,pe,fe,de],L=[];function T(t,e){return t[2]?0:t[3]?1:t[4]?2:3}function O(t,e){return t[3]||t[4]?ye:be}k=T(e),x=L[k]=K[k](e);let j=O(e),A=j(e);return{c(){n=u("div"),o=u("form"),r=u("h4"),r.textContent="Deploy a Kubernetes",i=f(),p=u("hr"),b=f(),v=d(P),w=f(),x.c(),_=f(),S=u("div"),E=u("button"),A.c(),this.c=t,$(r,"class","is-size-4"),$(E,"class",N="button is-primary "+(e[2]?"is-loading":"")),$(E,"type","submit"),E.disabled=M=(e[2]||!e[0].valid)&&!(e[3]||e[4])||!e[5]||""===e[5].mnemonics||""===e[5].storeSecret,$(S,"class","actions"),$(o,"class","box"),y(n,"padding","15px")},m(t,s){c(t,n,s),l(n,o),l(o,r),l(o,i),l(o,p),l(o,b),l(o,v),l(o,w),L[k].m(o,null),l(o,_),l(o,S),l(S,E),A.m(E,null),R=!0,C||(z=[m(E,"click",e[19]),m(o,"submit",h(e[11]))],C=!0)},p(t,[e]){(!R||1&e)&&P!==(P=JSON.stringify(t[0])+"")&&g(v,P);let n=k;k=T(t),k===n?L[k].p(t,e):(I(),B(L[n],1,1,(()=>{L[n]=null})),Y(),x=L[k],x?x.p(t,e):(x=L[k]=K[k](t),x.c()),q(x,1),x.m(o,_)),j!==(j=O(t))&&(A.d(1),A=j(t),A&&(A.c(),A.m(E,null))),(!R||4&e&&N!==(N="button is-primary "+(t[2]?"is-loading":"")))&&$(E,"class",N),(!R||61&e&&M!==(M=(t[2]||!t[0].valid)&&!(t[3]||t[4])||!t[5]||""===t[5].mnemonics||""===t[5].storeSecret))&&(E.disabled=M)},i(t){R||(q(x),R=!0)},o(t){B(x),R=!1},d(t){t&&a(n),L[k].d(),A.d(),C=!1,s(z)}}}function we(t,e,n){var s,o,r;const{events:i}=null!==(o=null===(s=window.configs)||void 0===s?void 0:s.grid3_client)&&void 0!==o?o:{};let l=new Lt;let c="config",a=!1,u=!1,d=!1;const f=null===(r=window.configs)||void 0===r?void 0:r.deploymentStore;let p,m;requestAnimationFrame((()=>{n(0,l.sshKey=null==p?void 0:p.sshKey,l)}));return[l,c,a,u,d,p,m,[{label:"Name",symbol:"name",placeholder:"Your K8S Name",type:"text"},{label:"Cluster Token",symbol:"secret",placeholder:"Your Cluster Token",type:"text"},{label:"Public SSH Key",symbol:"sshKey",placeholder:"Your Public SSH Key",type:"text"},{label:"Metadata",symbol:"metadata",placeholder:"Your Metadata",type:"text"},{label:"Description",symbol:"description",placeholder:"Your Description",type:"textarea"}],[{label:"Network Name",symbol:"name",placeholder:"Your Network Name",type:"text"},{label:"Network IP Range",symbol:"ipRange",placeholder:"Your Network IP Range",type:"text"}],[{label:"Name",symbol:"name",placeholder:"Enter name",type:"text"},{label:"CPU",symbol:"cpu",placeholder:"CPU",type:"number"},{label:"Memory",symbol:"memory",placeholder:"Memory in MB",type:"number"},{label:"Disk Size",symbol:"diskSize",placeholder:"Disk size in GB",type:"number"},{label:"Public IP",symbol:"publicIp",type:"checkbox"},{label:"Plantery Network",symbol:"plantery",placeholder:"",type:"checkbox"},{label:"Node ID",symbol:"node",placeholder:"Node ID",type:"number"},{label:"Root FS Size",symbol:"rootFsSize",placeholder:"Root File System Size",type:"number"}],[{label:"Config",value:"config"},{label:"Master",value:"master"},{label:"Workers",value:"workers"}],function(){function t(t){"string"==typeof t&&n(6,m=t)}n(2,a=!0),n(3,u=!1),n(4,d=!1),n(6,m=void 0),i.addListener("logs",t),qt(l,p).then((()=>{f.set(0),n(3,u=!0)})).catch((t=>{n(4,d=!0),n(6,m=t.message)})).finally((()=>{n(2,a=!1),i.removeListener("logs",t)}))},function(t){p=t,n(5,p)},t=>n(1,c=t.detail),function(t){l=t,n(0,l)},function(e){t.$$.not_equal(l.network,e)&&(l.network=e,n(0,l))},function(e){t.$$.not_equal(l.master,e)&&(l.master=e,n(0,l))},function(e){t.$$.not_equal(l.workers,e)&&(l.workers=e,n(0,l))},()=>n(0,l.workers=[...l.workers,new Pt],l),t=>{(u||d)&&(t.preventDefault(),n(3,u=!1),n(4,d=!1),n(2,a=!1))}]}customElements.define("tf-nodes-container",ue);!function(t,e){try{customElements.define(`tf-${t}`,e)}catch(e){console.warn(`Element with name '${t}' already defined.`)}}("kubernetes",class extends H{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},we,ve,r,{},null),t&&t.target&&c(t.target,this,t.anchor)}})}();
