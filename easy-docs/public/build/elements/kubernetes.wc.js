!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,s){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function l(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(){return d("")}function m(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function h(t){return function(e){return e.preventDefault(),t.call(this,e)}}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function y(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}function v(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function w(t){const e={};for(const n of t)e[n.name]=n.value;return e}let k;function x(t){k=t}function _(t){(function(){if(!k)throw new Error("Function called outside component initialization");return k})().$$.on_mount.push(t)}function S(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const N=[],E=[],M=[],R=[],C=Promise.resolve();let z=!1;function O(t){M.push(t)}function P(t){R.push(t)}let K=!1;const L=new Set;function T(){if(!K){K=!0;do{for(let t=0;t<N.length;t+=1){const e=N[t];x(e),j(e.$$)}for(x(null),N.length=0;E.length;)E.pop()();for(let t=0;t<M.length;t+=1){const e=M[t];L.has(e)||(L.add(e),e())}M.length=0}while(N.length);for(;R.length;)R.pop()();z=!1,K=!1,L.clear()}}function j(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const A=new Set;let D,F;function H(){D={r:0,c:[],p:D}}function I(){D.r||s(D.c),D=D.p}function Y(t,e){t&&t.i&&(A.delete(t),t.i(e))}function q(t,e,n,s){if(t&&t.o){if(A.has(t))return;A.add(t),D.c.push((()=>{A.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function B(t,e){t.d(1),e.delete(t.key)}function U(t,e){q(t,1,1,(()=>{e.delete(t.key)}))}function V(t,e,n,s,o,r,i,l,a,c,u,d){let f=t.length,p=r.length,m=f;const h={};for(;m--;)h[t[m].key]=m;const $=[],g=new Map,b=new Map;for(m=p;m--;){const t=d(o,r,m),l=n(t);let a=i.get(l);a?s&&a.p(t,e):(a=c(l,t),a.c()),g.set(l,$[m]=a),l in h&&b.set(l,Math.abs(m-h[l]))}const y=new Set,v=new Set;function w(t){Y(t,1),t.m(l,u),i.set(t.key,t),u=t.first,p--}for(;f&&p;){const e=$[p-1],n=t[f-1],s=e.key,o=n.key;e===n?(u=e.first,f--,p--):g.has(o)?!i.has(s)||y.has(s)?w(e):v.has(o)?f--:b.get(s)>b.get(o)?(v.add(s),w(e)):(y.add(o),f--):(a(n,i),f--)}for(;f--;){const e=t[f];g.has(e.key)||a(e,i)}for(;p;)w($[p-1]);return $}function J(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function X(t){t&&t.c()}function G(t,n,r,i){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(n,r),i||O((()=>{const n=a.map(e).filter(o);c?c.push(...n):s(n),t.$$.on_mount=[]})),u.forEach(O)}function W(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(t,e){-1===t.$$.dirty[0]&&(N.push(t),z||(z=!0,C.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(e,o,r,i,l,a,u,d=[-1]){const f=k;x(e);const p=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||f.$$.root};u&&u(p.root);let m=!1;if(p.ctx=r?r(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),m&&Q(e,t)),n})):[],p.update(),m=!0,s(p.before_update),p.fragment=!!i&&i(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(c)}else p.fragment&&p.fragment.c();o.intro&&Y(e.$$.fragment),G(e,o.target,o.anchor,o.customElement),T()}x(f)}var tt;"function"==typeof HTMLElement&&(F=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(o);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){W(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var et=new Uint8Array(16);function nt(){if(!tt&&!(tt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tt(et)}var st=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ot(t){return"string"==typeof t&&st.test(t)}for(var rt,it,lt=[],at=0;at<256;++at)lt.push((at+256).toString(16).substr(1));function ct(t,e,n){var s=(t=t||{}).random||(t.rng||nt)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=s[o];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(lt[t[e+0]]+lt[t[e+1]]+lt[t[e+2]]+lt[t[e+3]]+"-"+lt[t[e+4]]+lt[t[e+5]]+"-"+lt[t[e+6]]+lt[t[e+7]]+"-"+lt[t[e+8]]+lt[t[e+9]]+"-"+lt[t[e+10]]+lt[t[e+11]]+lt[t[e+12]]+lt[t[e+13]]+lt[t[e+14]]+lt[t[e+15]]).toLowerCase();if(!ot(n))throw TypeError("Stringified UUID is invalid");return n}(s)}function ut(t,e,n){const s=t.slice();return s[13]=e[n],s}function dt(t){let e,n;function s(t,n){return null==e&&(e=!!t[3]()),e?mt:"checkbox"===t[1].type?pt:"select"===t[1].type?ft:void 0}let o=s(t),r=o&&o(t);return{c(){r&&r.c(),n=p()},m(t,e){r&&r.m(t,e),a(t,n,e)},p(t,e){o===(o=s(t))&&r?r.p(t,e):(r&&r.d(1),r=o&&o(t),r&&(r.c(),r.m(n.parentNode,n)))},d(t){r&&r.d(t),t&&c(n)}}}function ft(t){let e,n,o,r,i,d=[],p=new Map,h=t[1].label&&ht(t),g=t[1].options;const b=t=>t[13].value;for(let e=0;e<g.length;e+=1){let n=ut(t,g,e),s=b(n);p.set(s,d[e]=$t(s,n))}return{c(){h&&h.c(),e=f(),n=u("div"),o=u("select");for(let t=0;t<d.length;t+=1)d[t].c();void 0===t[0][t[1].symbol]&&O((()=>t[12].call(o))),$(n,"class","select mb-2"),$(n,"id",t[4])},m(s,c){h&&h.m(s,c),a(s,e,c),a(s,n,c),l(n,o);for(let t=0;t<d.length;t+=1)d[t].m(o,null);v(o,t[0][t[1].symbol]),r||(i=[m(o,"change",t[8]),m(o,"change",t[12])],r=!0)},p(t,n){t[1].label?h?h.p(t,n):(h=ht(t),h.c(),h.m(e.parentNode,e)):h&&(h.d(1),h=null),2&n&&(g=t[1].options,d=V(d,n,b,1,t,g,p,o,B,$t,null,ut)),3&n&&v(o,t[0][t[1].symbol])},d(t){h&&h.d(t),t&&c(e),t&&c(n);for(let t=0;t<d.length;t+=1)d[t].d();r=!1,s(i)}}}function pt(t){let e,n,o,r,i,p,h,b,v,w,k=t[1].label+"";return{c(){e=u("div"),n=u("label"),o=u("input"),r=f(),i=u("span"),p=f(),h=u("label"),b=d(k),$(o,"type","checkbox"),$(o,"id",t[4]),$(i,"class","slider"),$(n,"class","switch"),$(h,"for",t[4]),$(h,"class","label ml-2"),y(h,"cursor","pointer"),y(e,"display","flex"),y(e,"align-items","center"),$(e,"class","mb-2")},m(s,c){a(s,e,c),l(e,n),l(n,o),o.checked=t[0][t[1].symbol],l(n,r),l(n,i),l(e,p),l(e,h),l(h,b),v||(w=[m(o,"change",t[11]),m(o,"change",t[7])],v=!0)},p(t,e){3&e&&(o.checked=t[0][t[1].symbol]),2&e&&k!==(k=t[1].label+"")&&g(b,k)},d(t){t&&c(e),v=!1,s(w)}}}function mt(t){let e,n,s,o,r,i=t[1].label+"";function p(t,e){return"textarea"===t[1].type?bt:gt}let m=p(t),h=m(t);return{c(){e=u("div"),n=u("p"),s=d(i),o=f(),r=u("div"),h.c(),$(n,"class","label"),$(r,"class","control"),$(e,"class","field"),$(e,"id",t[4])},m(t,i){a(t,e,i),l(e,n),l(n,s),l(e,o),l(e,r),h.m(r,null)},p(t,e){2&e&&i!==(i=t[1].label+"")&&g(s,i),m===(m=p(t))&&h?h.p(t,e):(h.d(1),h=m(t),h&&(h.c(),h.m(r,null)))},d(t){t&&c(e),h.d()}}}function ht(t){let e,n,s=t[1].label+"";return{c(){e=u("p"),n=d(s),$(e,"class","label")},m(t,s){a(t,e,s),l(e,n)},p(t,e){2&e&&s!==(s=t[1].label+"")&&g(n,s)},d(t){t&&c(e)}}}function $t(t,e){let n,s,o,r,i,p,m=e[13].label+"";return{key:t,first:null,c(){n=u("option"),s=d(m),o=f(),n.__value=r=e[13].value,n.value=n.__value,n.selected=i=e[13].selected,n.disabled=p=e[13].disabled,this.first=n},m(t,e){a(t,n,e),l(n,s),l(n,o)},p(t,o){e=t,2&o&&m!==(m=e[13].label+"")&&g(s,m),2&o&&r!==(r=e[13].value)&&(n.__value=r,n.value=n.__value),2&o&&i!==(i=e[13].selected)&&(n.selected=i),2&o&&p!==(p=e[13].disabled)&&(n.disabled=p)},d(t){t&&c(n)}}}function gt(t){let e,n,s,o,r;return{c(){e=u("input"),$(e,"class","input"),$(e,"placeholder",n=t[1].placeholder),e.value=s=t[0][t[1].symbol]},m(n,s){a(n,e,s),t[10](e),o||(r=m(e,"input",t[5]),o=!0)},p(t,o){2&o&&n!==(n=t[1].placeholder)&&$(e,"placeholder",n),3&o&&s!==(s=t[0][t[1].symbol])&&e.value!==s&&(e.value=s)},d(n){n&&c(e),t[10](null),o=!1,r()}}}function bt(t){let e,n,o,r;return{c(){e=u("textarea"),$(e,"class","textarea"),$(e,"placeholder",n=t[1].placeholder)},m(n,s){a(n,e,s),b(e,t[0][t[1].symbol]),o||(r=[m(e,"input",t[9]),m(e,"change",t[6])],o=!0)},p(t,s){2&s&&n!==(n=t[1].placeholder)&&$(e,"placeholder",n),3&s&&b(e,t[0][t[1].symbol])},d(t){t&&c(e),o=!1,s(r)}}}function yt(e){let n,s=e[1]&&dt(e);return{c(){s&&s.c(),n=p(),this.c=t},m(t,e){s&&s.m(t,e),a(t,n,e)},p(t,[e]){t[1]?s?s.p(t,e):(s=dt(t),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:t,o:t,d(t){s&&s.d(t),t&&c(n)}}}function vt(t,e,n){let s,{field:o}=e,{data:r}=e;const i=ct();_((()=>{s&&n(2,s.type=o.type,s)}));return t.$$set=t=>{"field"in t&&n(1,o=t.field),"data"in t&&n(0,r=t.data)},[r,o,s,()=>["text","number","password","textarea"].includes(o.type),i,t=>n(0,r[o.symbol]=t.target.value,r),function(e){S.call(this,t,e)},function(e){S.call(this,t,e)},function(e){S.call(this,t,e)},function(){r[o.symbol]=this.value,n(0,r),n(1,o)},function(t){E[t?"unshift":"push"]((()=>{s=t,n(2,s)}))},function(){r[o.symbol]=this.checked,n(0,r),n(1,o)},function(){r[o.symbol]=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(0,r),n(1,o)}]}class wt extends F{constructor(t){super(),this.shadowRoot.innerHTML='<style>.select,.select>select{width:100%}.switch{position:relative;display:inline-block;width:60px;height:34px}.switch input{opacity:0;width:0;height:0}.switch .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:0.4s;transition:0.4s;border-radius:34px}.switch .slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:white;-webkit-transition:0.4s;transition:0.4s;border-radius:50%}.switch input:checked+.slider{background-color:#2196f3}.switch input:checked+.slider{box-shadow:0 0 1px #2196f3}.switch input:checked+.slider:before{-webkit-transform:translateX(26px);-ms-transform:translateX(26px);transform:translateX(26px)}</style>',Z(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},vt,yt,r,{field:1,data:0},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),T()))}static get observedAttributes(){return["field","data"]}get field(){return this.$$.ctx[1]}set field(t){this.$$set({field:t}),T()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),T()}}function kt(t,e,n){const s=t.slice();return s[3]=e[n],s}function xt(t){let e,n,s=[],o=new Map,r=t[1];const i=t=>t[3].symbol;for(let e=0;e<r.length;e+=1){let n=kt(t,r,e),l=i(n);o.set(l,s[e]=_t(l,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=p()},m(t,o){for(let e=0;e<s.length;e+=1)s[e].m(t,o);a(t,e,o),n=!0},p(t,n){3&n&&(r=t[1],H(),s=V(s,n,i,1,t,r,o,e.parentNode,U,_t,e,kt),I())},i(t){if(!n){for(let t=0;t<r.length;t+=1)Y(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)q(s[t]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&c(e)}}}function _t(t,e){let n,s,o,r;function i(t){e[2](t)}let l={field:e[3]};return void 0!==e[0]&&(l.data=e[0]),s=new wt({props:l}),E.push((()=>J(s,"data",i))),{key:t,first:null,c(){n=p(),X(s.$$.fragment),this.first=n},m(t,e){a(t,n,e),G(s,t,e),r=!0},p(t,n){e=t;const r={};2&n&&(r.field=e[3]),!o&&1&n&&(o=!0,r.data=e[0],P((()=>o=!1))),s.$set(r)},i(t){r||(Y(s.$$.fragment,t),r=!0)},o(t){q(s.$$.fragment,t),r=!1},d(t){t&&c(n),W(s,t)}}}function St(e){let n,s,o=e[1]&&e[0]&&xt(e);return{c(){o&&o.c(),n=p(),this.c=t},m(t,e){o&&o.m(t,e),a(t,n,e),s=!0},p(t,[e]){t[1]&&t[0]?o?(o.p(t,e),3&e&&Y(o,1)):(o=xt(t),o.c(),Y(o,1),o.m(n.parentNode,n)):o&&(H(),q(o,1,1,(()=>{o=null})),I())},i(t){s||(Y(o),s=!0)},o(t){q(o),s=!1},d(t){o&&o.d(t),t&&c(n)}}}function Nt(t,e,n){let{fields:s}=e,{data:o}=e;return t.$$set=t=>{"fields"in t&&n(1,s=t.fields),"data"in t&&n(0,o=t.data)},[o,s,function(t){o=t,n(0,o)}]}customElements.define("tf-input",wt);class Et extends F{constructor(t){super(),Z(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Nt,St,r,{fields:1,data:0},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),T()))}static get observedAttributes(){return["fields","data"]}get fields(){return this.$$.ctx[1]}set fields(t){this.$$set({fields:t}),T()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),T()}}function Mt(t){const e=+t;return"number"==typeof e&&!isNaN(e)&&e>=0&&e.toFixed(0)===e.toString()}customElements.define("tf-inputs",Et);class Rt{constructor(t=ct(),e="vm_"+t.split("-")[0],n=0,s=0,o=100,r=!1,i=0,l=25,a=!0){this.id=t,this.name=e,this.node=n,this.cpu=s,this.diskSize=o,this.publicIp=r,this.memory=i,this.rootFsSize=l,this.plantery=a}get valid(){const{name:t,node:e,cpu:n,diskSize:s,memory:o,rootFsSize:r}=this;return""!==t&&Mt(e)&&Mt(n)&&Mt(s)&&Mt(o)&&Mt(r)}}class Ct extends Rt{}class zt extends Rt{}class Ot{constructor(t="nw_"+ct().split("-")[0],e="10.20.0.0/16"){this.name=t,this.ipRange=e}get valid(){const{name:t,ipRange:e}=this;return""!==t&&""!==e}}class Pt{constructor(t=ct(),e=new Ct,n=[new zt],s=new Ot,o="",r="",i="",l="",a=""){this.id=t,this.master=e,this.workers=n,this.network=s,this.name=o,this.secret=r,this.sshKey=i,this.metadata=l,this.description=a}get valid(){const{secret:t,sshKey:e,master:n,workers:s,network:o}=this;return""!==t&&""!==e&&n.valid&&o.valid&&s.reduce(((t,e)=>t&&e.valid),!0)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */const{NetworkModel:Kt}=null!==(it=null===(rt=window.configs)||void 0===rt?void 0:rt.grid3_client)&&void 0!==it?it:{};var Lt,Tt,jt,At;const{HTTPMessageBusClient:Dt}=null!==(Tt=null===(Lt=window.configs)||void 0===Lt?void 0:Lt.client)&&void 0!==Tt?Tt:{},{GridClient:Ft,K8SModel:Ht,KubernetesNodeModel:It}=null!==(At=null===(jt=window.configs)||void 0===jt?void 0:jt.grid3_client)&&void 0!==At?At:{};async function Yt(t,e){const{master:n,workers:s,network:o}=t,r=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]])}return n}(t,["master","workers","network"]),{secret:i,sshKey:l,description:a,metadata:c,name:u}=r,{mnemonics:d,storeSecret:f,networkEnv:p}=e,m=new Dt(0,""),h=new Ft(p,d,f,m,void 0,"tfkvstore"),$=[qt(n)],g=s.map(qt),b=new Ht;return b.name=u,b.secret=i,b.network=function(t){const e=new Kt;return e.name=t.name,e.ip_range=t.ipRange,e}(o),b.masters=$,b.workers=g,b.metadata=c,b.description=a,b.ssh_key=l,h.connect().then((()=>h.k8s.deploy(b)))}function qt(t){const e=new It;return e.name=t.name,e.node_id=t.node,e.cpu=t.cpu,e.disk_size=t.diskSize,e.memory=t.memory,e.public_ip=t.publicIp,e.rootfs_size=t.rootFsSize,e.planetary=t.plantery,e}function Bt(e){let n,s,o,r,i;function d(t){e[6](t)}let f={field:{type:"select",symbol:"selected",options:e[1]}};return void 0!==e[0]&&(f.data=e[0]),o=new wt({props:f}),E.push((()=>J(o,"data",d))),o.$on("change",e[7]),{c(){n=u("div"),s=u("div"),X(o.$$.fragment),this.c=t,$(n,"class","select-profile")},m(t,e){a(t,n,e),l(n,s),G(o,s,null),i=!0},p(t,[e]){const n={};2&e&&(n.field={type:"select",symbol:"selected",options:t[1]}),!r&&1&e&&(r=!0,n.data=t[0],P((()=>r=!1))),o.$set(n)},i(t){i||(Y(o.$$.fragment,t),i=!0)},o(t){q(o.$$.fragment,t),i=!1},d(t){t&&c(n),W(o)}}}function Ut(t,e,n){let s;var o;let r={selected:"0"};const l=null===(o=window.configs)||void 0===o?void 0:o.baseConfig;let a;i(t,l,(t=>n(5,s=t)));let c=[],{profile:u}=e;return t.$$set=t=>{"profile"in t&&n(3,u=t.profile)},t.$$.update=()=>{49&t.$$.dirty&&l&&(n(4,a=s),n(1,c=a.map(((t,e)=>({label:t.name||`Profile ${e+1}`,value:e.toString()})))),n(3,u=a[r.selected]))},[r,c,l,u,a,s,function(t){r=t,n(0,r)},function(e){S.call(this,t,e)}]}class Vt extends F{constructor(t){super(),this.shadowRoot.innerHTML="<style>.select-profile{display:flex;justify-content:flex-end}</style>",Z(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Ut,Bt,r,{profile:3},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),T()))}static get observedAttributes(){return["profile"]}get profile(){return this.$$.ctx[3]}set profile(t){this.$$set({profile:t}),T()}}function Jt(t,e,n){const s=t.slice();return s[4]=e[n],s}function Xt(t){let e,n=[],s=new Map,o=t[1];const r=t=>t[4].label;for(let e=0;e<o.length;e+=1){let i=Jt(t,o,e),l=r(i);s.set(l,n[e]=Gt(l,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=p()},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);a(t,e,s)},p(t,i){3&i&&(o=t[1],n=V(n,i,r,1,t,o,s,e.parentNode,B,Gt,e,Jt))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&c(e)}}}function Gt(t,e){let n,s,o,r,i,p,b,y,v=e[4].label+"";function w(){return e[3](e[4])}return{key:t,first:null,c(){n=u("li"),s=u("a"),o=u("span"),r=d(v),i=f(),$(s,"href","#!"),$(n,"class",p=e[0]===e[4].value?"is-active":""),this.first=n},m(t,e){a(t,n,e),l(n,s),l(s,o),l(o,r),l(n,i),b||(y=m(s,"click",h(w)),b=!0)},p(t,s){e=t,2&s&&v!==(v=e[4].label+"")&&g(r,v),3&s&&p!==(p=e[0]===e[4].value?"is-active":"")&&$(n,"class",p)},d(t){t&&c(n),b=!1,y()}}}function Wt(e){let n,s,o,r=e[1]&&Xt(e);return{c(){n=u("div"),s=u("ul"),r&&r.c(),this.c=t,$(n,"class",o="tabs "+(e[2]?"is-centered":""))},m(t,e){a(t,n,e),l(n,s),r&&r.m(s,null)},p(t,[e]){t[1]?r?r.p(t,e):(r=Xt(t),r.c(),r.m(s,null)):r&&(r.d(1),r=null),4&e&&o!==(o="tabs "+(t[2]?"is-centered":""))&&$(n,"class",o)},i:t,o:t,d(t){t&&c(n),r&&r.d()}}}function Qt(t,e,n){let{tabs:s}=e,{active:o}=e,{centered:r=!0}=e;return t.$$set=t=>{"tabs"in t&&n(1,s=t.tabs),"active"in t&&n(0,o=t.active),"centered"in t&&n(2,r=t.centered)},[o,s,r,t=>n(0,o=t.value)]}customElements.define("tf-select-profile",Vt);class Zt extends F{constructor(t){super(),Z(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Qt,Wt,r,{tabs:1,active:0,centered:2},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),T()))}static get observedAttributes(){return["tabs","active","centered"]}get tabs(){return this.$$.ctx[1]}set tabs(t){this.$$set({tabs:t}),T()}get active(){return this.$$.ctx[0]}set active(t){this.$$set({active:t}),T()}get centered(){return this.$$.ctx[2]}set centered(t){this.$$set({centered:t}),T()}}function te(e){let n,s,o,r;return{c(){n=u("div"),s=d("/> "),o=d(e[1]),this.c=t,$(n,"class",r="notification is-"+e[0])},m(t,e){a(t,n,e),l(n,s),l(n,o)},p(t,[e]){2&e&&g(o,t[1]),1&e&&r!==(r="notification is-"+t[0])&&$(n,"class",r)},i:t,o:t,d(t){t&&c(n)}}}function ee(t,e,n){let{type:s}=e,{message:o}=e;return t.$$set=t=>{"type"in t&&n(0,s=t.type),"message"in t&&n(1,o=t.message)},[s,o]}customElements.define("tf-tabs",Zt);class ne extends F{constructor(t){super(),Z(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},ee,te,r,{type:0,message:1},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),T()))}static get observedAttributes(){return["type","message"]}get type(){return this.$$.ctx[0]}set type(t){this.$$set({type:t}),T()}get message(){return this.$$.ctx[1]}set message(t){this.$$set({message:t}),T()}}function se(t,e,n){const s=t.slice();return s[5]=e[n],s[7]=n,s}function oe(t){let e,n,s=[],o=new Map,r=t[0];const i=t=>t[5].id;for(let e=0;e<r.length;e+=1){let n=se(t,r,e),l=i(n);o.set(l,s[e]=re(l,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=p()},m(t,o){for(let e=0;e<s.length;e+=1)s[e].m(t,o);a(t,e,o),n=!0},p(t,n){3&n&&(r=t[0],H(),s=V(s,n,i,1,t,r,o,e.parentNode,U,re,e,se),I())},i(t){if(!n){for(let t=0;t<r.length;t+=1)Y(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)q(s[t]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&c(e)}}}function re(t,e){let n,s,o,r,i,p,h,b,y,v,w,k,x,_=e[5].name+"";function S(){return e[3](e[7])}function N(t){e[4](t)}let M={fields:e[1]};return void 0!==e[0]&&(M.data=e[0]),b=new Et({props:M}),E.push((()=>J(b,"data",N))),{key:t,first:null,c(){n=u("div"),s=u("div"),o=u("p"),r=d(_),i=f(),p=u("button"),p.innerHTML="<span>-</span>",h=f(),X(b.$$.fragment),v=f(),$(o,"class","is-size-5 has-text-weight-bold"),$(p,"type","button"),$(p,"class","button is-danger"),$(s,"class","worker-header"),$(n,"class","box"),this.first=n},m(t,e){a(t,n,e),l(n,s),l(s,o),l(o,r),l(s,i),l(s,p),l(n,h),G(b,n,null),l(n,v),w=!0,k||(x=m(p,"click",S),k=!0)},p(t,n){e=t,(!w||1&n)&&_!==(_=e[5].name+"")&&g(r,_);const s={};2&n&&(s.fields=e[1]),!y&&1&n&&(y=!0,s.data=e[0],P((()=>y=!1))),b.$set(s)},i(t){w||(Y(b.$$.fragment,t),w=!0)},o(t){q(b.$$.fragment,t),w=!1},d(t){t&&c(n),W(b),k=!1,x()}}}function ie(e){let n,s,o,r,i,d,p,h=e[0]&&oe(e);return{c(){n=u("div"),s=u("button"),s.innerHTML="<span>+</span>",o=f(),r=u("div"),h&&h.c(),this.c=t,$(s,"type","button"),$(s,"class","button is-primary"),$(n,"class","actions"),$(r,"class","worker-container")},m(t,c){a(t,n,c),l(n,s),a(t,o,c),a(t,r,c),h&&h.m(r,null),i=!0,d||(p=m(s,"click",e[2]),d=!0)},p(t,[e]){t[0]?h?(h.p(t,e),1&e&&Y(h,1)):(h=oe(t),h.c(),Y(h,1),h.m(r,null)):h&&(H(),q(h,1,1,(()=>{h=null})),I())},i(t){i||(Y(h),i=!0)},o(t){q(h),i=!1},d(t){t&&c(n),t&&c(o),t&&c(r),h&&h.d(),d=!1,p()}}}function le(t,e,n){let{nodes:s}=e,{fields:o}=e;return t.$$set=t=>{"nodes"in t&&n(0,s=t.nodes),"fields"in t&&n(1,o=t.fields)},[s,o,function(e){S.call(this,t,e)},t=>n(0,s=s.filter(((e,n)=>t!==n))),function(t){s=t,n(0,s)}]}customElements.define("tf-alert",ne);class ae extends F{constructor(t){super(),this.shadowRoot.innerHTML="<style>.worker-container{overflow-x:hidden;overflow-y:auto;max-height:70vh;will-change:transform;padding-bottom:5rem;margin-bottom:20px}.actions{display:flex;justify-content:flex-end;align-items:center;margin-bottom:20px}.worker-header{display:flex;justify-content:space-between;align-items:center}</style>",Z(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},le,ie,r,{nodes:0,fields:1},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),T()))}static get observedAttributes(){return["nodes","fields"]}get nodes(){return this.$$.ctx[0]}set nodes(t){this.$$set({nodes:t}),T()}get fields(){return this.$$.ctx[1]}set fields(t){this.$$set({fields:t}),T()}}function ce(t){let e,n,s,o,r,i,l,u,d,m;function h(e){t[14](e)}let $={};function g(e){t[15](e)}void 0!==t[5]&&($.profile=t[5]),e=new Vt({props:$}),E.push((()=>J(e,"profile",h)));let b={tabs:t[11]};void 0!==t[1]&&(b.active=t[1]),o=new Zt({props:b}),E.push((()=>J(o,"active",g)));let y="config"===t[1]&&pe(t),v="master"===t[1]&&me(t),w="workers"===t[1]&&he(t);return{c(){X(e.$$.fragment),s=f(),X(o.$$.fragment),i=f(),y&&y.c(),l=f(),v&&v.c(),u=f(),w&&w.c(),d=p()},m(t,n){G(e,t,n),a(t,s,n),G(o,t,n),a(t,i,n),y&&y.m(t,n),a(t,l,n),v&&v.m(t,n),a(t,u,n),w&&w.m(t,n),a(t,d,n),m=!0},p(t,s){const i={};!n&&32&s&&(n=!0,i.profile=t[5],P((()=>n=!1))),e.$set(i);const a={};!r&&2&s&&(r=!0,a.active=t[1],P((()=>r=!1))),o.$set(a),"config"===t[1]?y?(y.p(t,s),2&s&&Y(y,1)):(y=pe(t),y.c(),Y(y,1),y.m(l.parentNode,l)):y&&(H(),q(y,1,1,(()=>{y=null})),I()),"master"===t[1]?v?(v.p(t,s),2&s&&Y(v,1)):(v=me(t),v.c(),Y(v,1),v.m(u.parentNode,u)):v&&(H(),q(v,1,1,(()=>{v=null})),I()),"workers"===t[1]?w?(w.p(t,s),2&s&&Y(w,1)):(w=he(t),w.c(),Y(w,1),w.m(d.parentNode,d)):w&&(H(),q(w,1,1,(()=>{w=null})),I())},i(t){m||(Y(e.$$.fragment,t),Y(o.$$.fragment,t),Y(y),Y(v),Y(w),m=!0)},o(t){q(e.$$.fragment,t),q(o.$$.fragment,t),q(y),q(v),q(w),m=!1},d(t){W(e,t),t&&c(s),W(o,t),t&&c(i),y&&y.d(t),t&&c(l),v&&v.d(t),t&&c(u),w&&w.d(t),t&&c(d)}}}function ue(t){let e,n;return e=new ne({props:{type:"danger",message:t[6]||"Failed to deploy K8S."}}),{c(){X(e.$$.fragment)},m(t,s){G(e,t,s),n=!0},p(t,n){const s={};64&n&&(s.message=t[6]||"Failed to deploy K8S."),e.$set(s)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function de(e){let n,s;return n=new ne({props:{type:"success",message:"Successfully deployed K8S."}}),{c(){X(n.$$.fragment)},m(t,e){G(n,t,e),s=!0},p:t,i(t){s||(Y(n.$$.fragment,t),s=!0)},o(t){q(n.$$.fragment,t),s=!1},d(t){W(n,t)}}}function fe(t){let e,n;return e=new ne({props:{type:"info",message:t[6]||"Loading..."}}),{c(){X(e.$$.fragment)},m(t,s){G(e,t,s),n=!0},p(t,n){const s={};64&n&&(s.message=t[6]||"Loading..."),e.$set(s)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function pe(t){let e,n,s,o,r,i;function l(e){t[16](e)}let u={fields:t[8]};function d(e){t[17](e)}void 0!==t[0]&&(u.data=t[0]),e=new Et({props:u}),E.push((()=>J(e,"data",l)));let p={fields:t[9]};return void 0!==t[0].network&&(p.data=t[0].network),o=new Et({props:p}),E.push((()=>J(o,"data",d))),{c(){X(e.$$.fragment),s=f(),X(o.$$.fragment)},m(t,n){G(e,t,n),a(t,s,n),G(o,t,n),i=!0},p(t,s){const i={};!n&&1&s&&(n=!0,i.data=t[0],P((()=>n=!1))),e.$set(i);const l={};!r&&1&s&&(r=!0,l.data=t[0].network,P((()=>r=!1))),o.$set(l)},i(t){i||(Y(e.$$.fragment,t),Y(o.$$.fragment,t),i=!0)},o(t){q(e.$$.fragment,t),q(o.$$.fragment,t),i=!1},d(t){W(e,t),t&&c(s),W(o,t)}}}function me(t){let e,n,s;function o(e){t[18](e)}let r={fields:t[10]};return void 0!==t[0].master&&(r.data=t[0].master),e=new Et({props:r}),E.push((()=>J(e,"data",o))),{c(){X(e.$$.fragment)},m(t,n){G(e,t,n),s=!0},p(t,s){const o={};!n&&1&s&&(n=!0,o.data=t[0].master,P((()=>n=!1))),e.$set(o)},i(t){s||(Y(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function he(t){let e,n,s;function o(e){t[19](e)}let r={fields:t[10]};return void 0!==t[0].workers&&(r.nodes=t[0].workers),e=new ae({props:r}),E.push((()=>J(e,"nodes",o))),e.$on("click",t[20]),{c(){X(e.$$.fragment)},m(t,n){G(e,t,n),s=!0},p(t,s){const o={};!n&&1&s&&(n=!0,o.nodes=t[0].workers,P((()=>n=!1))),e.$set(o)},i(t){s||(Y(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function $e(t){let e;return{c(){e=d("Deploy")},m(t,n){a(t,e,n)},d(t){t&&c(e)}}}function ge(t){let e;return{c(){e=d("Back")},m(t,n){a(t,e,n)},d(t){t&&c(e)}}}function be(e){let n,o,r,i,p,b,v,w,k,x,_,S,N,M,R,C,z,O,K,L,T,j,A,D=JSON.stringify(e[7])+"",F=JSON.stringify(e[0])+"";function B(t){e[13](t)}let U={field:{label:"test",symbol:"test",type:"text"}};void 0!==e[7]&&(U.data=e[7]),r=new wt({props:U}),E.push((()=>J(r,"data",B)));const V=[fe,de,ue,ce],Q=[];function Z(t,e){return t[2]?0:t[3]?1:t[4]?2:3}function tt(t,e){return t[3]||t[4]?ge:$e}M=Z(e),R=Q[M]=V[M](e);let et=tt(e),nt=et(e);return{c(){n=d(D),o=f(),X(r.$$.fragment),p=f(),b=u("div"),v=u("form"),w=u("h4"),w.textContent="Deploy a Kubernetes",k=f(),x=u("hr"),_=f(),S=d(F),N=f(),R.c(),C=f(),z=u("div"),O=u("button"),nt.c(),this.c=t,$(w,"class","is-size-4"),$(O,"class",K="button is-primary "+(e[2]?"is-loading":"")),$(O,"type","submit"),O.disabled=L=(e[2]||!e[0].valid)&&!(e[3]||e[4])||!e[5]||""===e[5].mnemonics||""===e[5].storeSecret,$(z,"class","actions"),$(v,"class","box"),y(b,"padding","15px")},m(t,s){a(t,n,s),a(t,o,s),G(r,t,s),a(t,p,s),a(t,b,s),l(b,v),l(v,w),l(v,k),l(v,x),l(v,_),l(v,S),l(v,N),Q[M].m(v,null),l(v,C),l(v,z),l(z,O),nt.m(O,null),T=!0,j||(A=[m(O,"click",e[21]),m(v,"submit",h(e[12]))],j=!0)},p(t,[e]){(!T||128&e)&&D!==(D=JSON.stringify(t[7])+"")&&g(n,D);const s={};!i&&128&e&&(i=!0,s.data=t[7],P((()=>i=!1))),r.$set(s),(!T||1&e)&&F!==(F=JSON.stringify(t[0])+"")&&g(S,F);let o=M;M=Z(t),M===o?Q[M].p(t,e):(H(),q(Q[o],1,1,(()=>{Q[o]=null})),I(),R=Q[M],R?R.p(t,e):(R=Q[M]=V[M](t),R.c()),Y(R,1),R.m(v,C)),et!==(et=tt(t))&&(nt.d(1),nt=et(t),nt&&(nt.c(),nt.m(O,null))),(!T||4&e&&K!==(K="button is-primary "+(t[2]?"is-loading":"")))&&$(O,"class",K),(!T||61&e&&L!==(L=(t[2]||!t[0].valid)&&!(t[3]||t[4])||!t[5]||""===t[5].mnemonics||""===t[5].storeSecret))&&(O.disabled=L)},i(t){T||(Y(r.$$.fragment,t),Y(R),T=!0)},o(t){q(r.$$.fragment,t),q(R),T=!1},d(t){t&&c(n),t&&c(o),W(r,t),t&&c(p),t&&c(b),Q[M].d(),nt.d(),j=!1,s(A)}}}function ye(t,e,n){var s,o,r;const{events:i}=null!==(o=null===(s=window.configs)||void 0===s?void 0:s.grid3_client)&&void 0!==o?o:{};let l=new Pt;let a="config",c=!1,u=!1,d=!1;const f=null===(r=window.configs)||void 0===r?void 0:r.deploymentStore;let p,m;requestAnimationFrame((()=>{n(0,l.sshKey=null==p?void 0:p.sshKey,l)}));let h={test:""};return[l,a,c,u,d,p,m,h,[{label:"Name",symbol:"name",placeholder:"Your K8S Name",type:"text"},{label:"Cluster Token",symbol:"secret",placeholder:"Your Cluster Token",type:"text"},{label:"Public SSH Key",symbol:"sshKey",placeholder:"Your Public SSH Key",type:"text"},{label:"Metadata",symbol:"metadata",placeholder:"Your Metadata",type:"text"},{label:"Description",symbol:"description",placeholder:"Your Description",type:"textarea"}],[{label:"Network Name",symbol:"name",placeholder:"Your Network Name",type:"text"},{label:"Network IP Range",symbol:"ipRange",placeholder:"Your Network IP Range",type:"text"}],[{label:"Name",symbol:"name",placeholder:"Enter name",type:"text"},{label:"CPU",symbol:"cpu",placeholder:"CPU",type:"number"},{label:"Memory",symbol:"memory",placeholder:"Memory in MB",type:"number"},{label:"Disk Size",symbol:"diskSize",placeholder:"Disk size in GB",type:"number"},{label:"Public IP",symbol:"publicIp",type:"checkbox"},{label:"Plantery Network",symbol:"plantery",placeholder:"",type:"checkbox"},{label:"Node ID",symbol:"node",placeholder:"Node ID",type:"number"},{label:"Root FS Size",symbol:"rootFsSize",placeholder:"Root File System Size",type:"number"}],[{label:"Config",value:"config"},{label:"Master",value:"master"},{label:"Workers",value:"workers"}],function(){function t(t){"string"==typeof t&&n(6,m=t)}n(2,c=!0),n(3,u=!1),n(4,d=!1),n(6,m=void 0),i.addListener("logs",t),Yt(l,p).then((()=>{f.set(0),n(3,u=!0)})).catch((t=>{n(4,d=!0),n(6,m=t.message)})).finally((()=>{n(2,c=!1),i.removeListener("logs",t)}))},function(t){h=t,n(7,h)},function(t){p=t,n(5,p)},function(t){a=t,n(1,a)},function(t){l=t,n(0,l)},function(e){t.$$.not_equal(l.network,e)&&(l.network=e,n(0,l))},function(e){t.$$.not_equal(l.master,e)&&(l.master=e,n(0,l))},function(e){t.$$.not_equal(l.workers,e)&&(l.workers=e,n(0,l))},()=>n(0,l.workers=[...l.workers,new zt],l),t=>{(u||d)&&(t.preventDefault(),n(3,u=!1),n(4,d=!1),n(2,c=!1))}]}customElements.define("tf-nodes-container",ae);customElements.define("tf-kubernetes",class extends F{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',Z(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},ye,be,r,{},null),t&&t.target&&a(t.target,this,t.anchor)}})}();
