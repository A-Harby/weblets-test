!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function o(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,n,l){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}(n,l))}function c(e,t){e.appendChild(t)}function i(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function f(){return d(" ")}function p(){return d("")}function m(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function h(e){return function(t){return t.preventDefault(),e.call(this,t)}}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e){return""===e?null:+e}function g(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function k(e,t){e.value=null==t?"":t}function v(e,t,n,l){e.style.setProperty(t,n,l?"important":"")}function w(e){const t={};for(const n of e)t[n.name]=n.value;return t}let $;function x(e){$=e}const _=[],S=[],M=[],C=[],N=Promise.resolve();let E=!1;function P(e){M.push(e)}let z=!1;const R=new Set;function j(){if(!z){z=!0;do{for(let e=0;e<_.length;e+=1){const t=_[e];x(t),K(t.$$)}for(x(null),_.length=0;S.length;)S.pop()();for(let e=0;e<M.length;e+=1){const t=M[e];R.has(t)||(R.add(t),t())}M.length=0}while(_.length);for(;C.length;)C.pop()();E=!1,z=!1,R.clear()}}function K(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(P)}}const O=new Set;function T(e,t){e&&e.i&&(O.delete(e),e.i(t))}function I(e,t){e.d(1),t.delete(e.key)}function L(e,t,n,l,o,r,s,c,i,a,u,d){let f=e.length,p=r.length,m=f;const h={};for(;m--;)h[e[m].key]=m;const b=[],y=new Map,g=new Map;for(m=p;m--;){const e=d(o,r,m),c=n(e);let i=s.get(c);i?l&&i.p(e,t):(i=a(c,e),i.c()),y.set(c,b[m]=i),c in h&&g.set(c,Math.abs(m-h[c]))}const k=new Set,v=new Set;function w(e){T(e,1),e.m(c,u),s.set(e.key,e),u=e.first,p--}for(;f&&p;){const t=b[p-1],n=e[f-1],l=t.key,o=n.key;t===n?(u=t.first,f--,p--):y.has(o)?!s.has(l)||k.has(l)?w(t):v.has(o)?f--:g.get(l)>g.get(o)?(v.add(l),w(t)):(k.add(o),f--):(i(n,s),f--)}for(;f--;){const t=e[f];y.has(t.key)||i(t,s)}for(;p;)w(b[p-1]);return b}function D(e,t){-1===e.$$.dirty[0]&&(_.push(e),E||(E=!0,N.then(j)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function H(r,s,c,i,u,d,f,p=[-1]){const m=$;x(r);const h=r.$$={fragment:null,ctx:null,props:d,update:e,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(m?m.$$.context:[])),callbacks:n(),dirty:p,skip_bound:!1,root:s.target||m.$$.root};f&&f(h.root);let b=!1;if(h.ctx=c?c(r,s.props||{},((e,t,...n)=>{const l=n.length?n[0]:t;return h.ctx&&u(h.ctx[e],h.ctx[e]=l)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](l),b&&D(r,e)),t})):[],h.update(),b=!0,l(h.before_update),h.fragment=!!i&&i(h.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);h.fragment&&h.fragment.l(e),e.forEach(a)}else h.fragment&&h.fragment.c();s.intro&&T(r.$$.fragment),function(e,n,r,s){const{fragment:c,on_mount:i,on_destroy:a,after_update:u}=e.$$;c&&c.m(n,r),s||P((()=>{const n=i.map(t).filter(o);a?a.push(...n):l(n),e.$$.on_mount=[]})),u.forEach(P)}(r,s.target,s.anchor,s.customElement),j()}x(m)}let A;var B;"function"==typeof HTMLElement&&(A=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(t).filter(o);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){l(this.$$.on_disconnect)}$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});var F=new Uint8Array(16);function U(){if(!B&&!(B="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return B(F)}var V=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Y(e){return"string"==typeof e&&V.test(e)}for(var G,W,q=[],J=0;J<256;++J)q.push((J+256).toString(16).substr(1));function Q(e,t,n){var l=(e=e||{}).random||(e.rng||U)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=l[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(q[e[t+0]]+q[e[t+1]]+q[e[t+2]]+q[e[t+3]]+"-"+q[e[t+4]]+q[e[t+5]]+"-"+q[e[t+6]]+q[e[t+7]]+"-"+q[e[t+8]]+q[e[t+9]]+"-"+q[e[t+10]]+q[e[t+11]]+q[e[t+12]]+q[e[t+13]]+q[e[t+14]]+q[e[t+15]]).toLowerCase();if(!Y(n))throw TypeError("Stringified UUID is invalid");return n}(l)}function X(e){const t=+e;return"number"==typeof t&&!isNaN(t)&&t>=0&&t.toFixed(0)===t.toString()}class Z{constructor(e=Q(),t="vm_"+e.split("-")[0],n=0,l=0,o=100,r=!1,s=0,c=25,i=!0){this.id=e,this.name=t,this.node=n,this.cpu=l,this.diskSize=o,this.publicIp=r,this.memory=s,this.rootFsSize=c,this.plantery=i}get valid(){const{name:e,node:t,cpu:n,diskSize:l,memory:o,rootFsSize:r}=this;return""!==e&&X(t)&&X(n)&&X(l)&&X(o)&&X(r)}}class ee extends Z{}class te extends Z{}class ne{constructor(e="nw_"+Q().split("-")[0],t="10.20.0.0/16"){this.name=e,this.ipRange=t}get valid(){const{name:e,ipRange:t}=this;return""!==e&&""!==t}}class le{constructor(e=Q(),t=new ee,n=[new te],l=new ne,o="",r="",s="",c="",i=""){this.id=e,this.master=t,this.workers=n,this.network=l,this.name=o,this.secret=r,this.sshKey=s,this.metadata=c,this.description=i}get valid(){const{secret:e,sshKey:t,master:n,workers:l,network:o}=this;return""!==e&&""!==t&&n.valid&&o.valid&&l.reduce(((e,t)=>e&&t.valid),!0)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */const{NetworkModel:oe}=null!==(W=null===(G=window.configs)||void 0===G?void 0:G.grid3_client)&&void 0!==W?W:{};var re,se,ce,ie;const{HTTPMessageBusClient:ae}=null!==(se=null===(re=window.configs)||void 0===re?void 0:re.client)&&void 0!==se?se:{},{GridClient:ue,K8SModel:de,KubernetesNodeModel:fe}=null!==(ie=null===(ce=window.configs)||void 0===ce?void 0:ce.grid3_client)&&void 0!==ie?ie:{};async function pe(e,t){const{master:n,workers:l,network:o}=e,r=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(l=Object.getOwnPropertySymbols(e);o<l.length;o++)t.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(e,l[o])&&(n[l[o]]=e[l[o]])}return n}(e,["master","workers","network"]),{secret:s,sshKey:c,description:i,metadata:a,name:u}=r,{mnemonics:d,storeSecret:f,networkEnv:p}=t,m=new ae(0,""),h=new ue(p,d,f,m,void 0,"tfkvstore"),b=[me(n)],y=l.map(me),g=new de;return g.name=u,g.secret=s,g.network=function(e){const t=new oe;return t.name=e.name,t.ip_range=e.ipRange,t}(o),g.masters=b,g.workers=y,g.metadata=a,g.description=i,g.ssh_key=c,h.connect().then((()=>h.k8s.deploy(g)))}function me(e){const t=new fe;return t.name=e.name,t.node_id=e.node,t.cpu=e.cpu,t.disk_size=e.diskSize,t.memory=e.memory,t.public_ip=e.publicIp,t.rootfs_size=e.rootFsSize,t.planetary=e.plantery,t}function he(e,t,n){const l=e.slice();return l[34]=t[n],l[35]=t,l[36]=n,l}function be(e,t,n){const l=e.slice();return l[37]=t[n],l[38]=t,l[39]=n,l}function ye(e,t,n){const l=e.slice();return l[37]=t[n],l[40]=t,l[41]=n,l}function ge(e,t,n){const l=e.slice();return l[37]=t[n],l[42]=t,l[43]=n,l}function ke(e,t,n){const l=e.slice();return l[37]=t[n],l[44]=t,l[45]=n,l}function ve(e,t,n){const l=e.slice();return l[46]=t[n],l}function we(e,t,n){const l=e.slice();return l[7]=t[n],l[50]=n,l}function $e(e){let t,n,l,o,r,s,d,h,y,g,k,w=[],$=new Map,x=[],_=new Map,S=e[6];const M=e=>e[50];for(let t=0;t<S.length;t+=1){let n=we(e,S,t),l=M(n);$.set(l,w[t]=Ne(l,n))}let C=e[11];const N=e=>e[46].label;for(let t=0;t<C.length;t+=1){let n=ve(e,C,t),l=N(n);_.set(l,x[t]=Ee(l,n))}let E="Config"===e[1]&&Pe(e),P="Master"===e[1]&&Oe(e),z="Workers"===e[1]&&Ie(e);return{c(){t=u("div"),n=u("select");for(let e=0;e<w.length;e+=1)w[e].c();l=f(),o=u("div"),r=u("ul");for(let e=0;e<x.length;e+=1)x[e].c();s=f(),E&&E.c(),d=f(),P&&P.c(),h=f(),z&&z.c(),y=p(),b(t,"class","select mb-4"),v(t,"display","flex"),v(t,"justify-content","flex-end"),b(o,"class","tabs is-centered")},m(a,u){i(a,t,u),c(t,n);for(let e=0;e<w.length;e+=1)w[e].m(n,null);i(a,l,u),i(a,o,u),c(o,r);for(let e=0;e<x.length;e+=1)x[e].m(r,null);i(a,s,u),E&&E.m(a,u),i(a,d,u),P&&P.m(a,u),i(a,h,u),z&&z.m(a,u),i(a,y,u),g||(k=m(n,"change",e[14]),g=!0)},p(e,t){64&t[0]&&(S=e[6],w=L(w,t,M,1,e,S,$,n,I,Ne,null,we)),2050&t[0]&&(C=e[11],x=L(x,t,N,1,e,C,_,r,I,Ee,null,ve)),"Config"===e[1]?E?E.p(e,t):(E=Pe(e),E.c(),E.m(d.parentNode,d)):E&&(E.d(1),E=null),"Master"===e[1]?P?P.p(e,t):(P=Oe(e),P.c(),P.m(h.parentNode,h)):P&&(P.d(1),P=null),"Workers"===e[1]?z?z.p(e,t):(z=Ie(e),z.c(),z.m(y.parentNode,y)):z&&(z.d(1),z=null)},d(e){e&&a(t);for(let e=0;e<w.length;e+=1)w[e].d();e&&a(l),e&&a(o);for(let e=0;e<x.length;e+=1)x[e].d();e&&a(s),E&&E.d(e),e&&a(d),P&&P.d(e),e&&a(h),z&&z.d(e),e&&a(y),g=!1,k()}}}function xe(e){let t,n;function l(e,t){return e[5]?Ae:He}let o=l(e),r=o(e);return{c(){t=u("div"),n=d(">\n        "),r.c(),b(t,"class","notification is-danger")},m(e,l){i(e,t,l),c(t,n),r.m(t,null)},p(e,n){o===(o=l(e))&&r?r.p(e,n):(r.d(1),r=o(e),r&&(r.c(),r.m(t,null)))},d(e){e&&a(t),r.d()}}}function _e(t){let n;return{c(){n=u("div"),n.textContent="> Successfully deployed K8S.",b(n,"class","notification is-success")},m(e,t){i(e,n,t)},p:e,d(e){e&&a(n)}}}function Se(e){let t;function n(e,t){return e[5]?Fe:Be}let l=n(e),o=l(e);return{c(){t=u("div"),o.c(),b(t,"class","notification is-info")},m(e,n){i(e,t,n),o.m(t,null)},p(e,r){l===(l=n(e))&&o?o.p(e,r):(o.d(1),o=l(e),o&&(o.c(),o.m(t,null)))},d(e){e&&a(t),o.d()}}}function Me(e){let t,n,l,o=e[50]+1+"";return{c(){t=d("Profile "),n=d(o),l=f()},m(e,o){i(e,t,o),i(e,n,o),i(e,l,o)},p(e,t){64&t[0]&&o!==(o=e[50]+1+"")&&g(n,o)},d(e){e&&a(t),e&&a(n),e&&a(l)}}}function Ce(e){let t,n,l=e[7].name+"";return{c(){t=d(l),n=f()},m(e,l){i(e,t,l),i(e,n,l)},p(e,n){64&n[0]&&l!==(l=e[7].name+"")&&g(t,l)},d(e){e&&a(t),e&&a(n)}}}function Ne(e,t){let n,l;function o(e,t){return e[7].name?Ce:Me}let r=o(t),s=r(t);return{key:e,first:null,c(){n=u("option"),s.c(),n.__value=l=t[50],n.value=n.__value,this.first=n},m(e,t){i(e,n,t),s.m(n,null)},p(e,c){r===(r=o(t=e))&&s?s.p(t,c):(s.d(1),s=r(t),s&&(s.c(),s.m(n,null))),64&c[0]&&l!==(l=t[50])&&(n.__value=l,n.value=n.__value)},d(e){e&&a(n),s.d()}}}function Ee(e,t){let n,l,o,r,s,p,y,g,k=t[46].label+"";function v(){return t[17](t[46])}return{key:e,first:null,c(){n=u("li"),l=u("a"),o=u("span"),r=d(k),s=f(),b(l,"href","#!"),b(n,"class",p=t[1]===t[46].label?"is-active":""),this.first=n},m(e,t){i(e,n,t),c(n,l),c(l,o),c(o,r),c(n,s),y||(g=m(l,"click",h(v)),y=!0)},p(e,l){t=e,2&l[0]&&p!==(p=t[1]===t[46].label?"is-active":"")&&b(n,"class",p)},d(e){e&&a(n),y=!1,g()}}}function Pe(e){let t,n,l=[],o=new Map,r=[],s=new Map,c=e[8];const u=e=>e[37].symbol;for(let t=0;t<c.length;t+=1){let n=ke(e,c,t),r=u(n);o.set(r,l[t]=je(r,n))}let d=e[9];const m=e=>e[37].symbol;for(let t=0;t<d.length;t+=1){let n=ge(e,d,t),l=m(n);s.set(l,r[t]=Ke(l,n))}return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=f();for(let e=0;e<r.length;e+=1)r[e].c();n=p()},m(e,o){for(let t=0;t<l.length;t+=1)l[t].m(e,o);i(e,t,o);for(let t=0;t<r.length;t+=1)r[t].m(e,o);i(e,n,o)},p(e,i){257&i[0]&&(c=e[8],l=L(l,i,u,1,e,c,o,t.parentNode,I,je,t,ke)),513&i[0]&&(d=e[9],r=L(r,i,m,1,e,d,s,n.parentNode,I,Ke,n,ge))},d(e){for(let t=0;t<l.length;t+=1)l[t].d(e);e&&a(t);for(let t=0;t<r.length;t+=1)r[t].d(e);e&&a(n)}}}function ze(e){let t,n,l;function o(){e[19].call(t,e[37])}return{c(){t=u("input"),b(t,"class","input"),b(t,"type","text"),b(t,"placeholder",e[37].placeholder)},m(r,s){i(r,t,s),k(t,e[0][e[37].symbol]),n||(l=m(t,"input",o),n=!0)},p(n,l){e=n,257&l[0]&&t.value!==e[0][e[37].symbol]&&k(t,e[0][e[37].symbol])},d(e){e&&a(t),n=!1,l()}}}function Re(e){let t,n,l;function o(){e[18].call(t,e[37])}return{c(){t=u("textarea"),b(t,"class","textarea"),b(t,"placeholder",e[37].placeholder)},m(r,s){i(r,t,s),k(t,e[0][e[37].symbol]),n||(l=m(t,"input",o),n=!0)},p(n,l){e=n,257&l[0]&&k(t,e[0][e[37].symbol])},d(e){e&&a(t),n=!1,l()}}}function je(e,t){let n,l,o,r,s,p,m=t[37].label+"";let h=function(e,t){return e[37].textarea?Re:ze}(t),y=h(t);return{key:e,first:null,c(){n=u("div"),l=u("p"),o=d(m),r=f(),s=u("div"),y.c(),p=f(),b(l,"class","label"),b(s,"class","control"),b(n,"class","field"),this.first=n},m(e,t){i(e,n,t),c(n,l),c(l,o),c(n,r),c(n,s),y.m(s,null),c(n,p)},p(e,n){t=e,y.p(t,n)},d(e){e&&a(n),y.d()}}}function Ke(e,t){let n,l,o,r,s,p,h,y,g,v,w=t[37].label+"";function $(){t[20].call(p,t[37])}return{key:e,first:null,c(){n=u("div"),l=u("p"),o=d(w),r=f(),s=u("div"),p=u("input"),y=f(),b(l,"class","label"),b(p,"class","input"),b(p,"type","text"),b(p,"placeholder",h=t[37].placeholder),b(s,"class","control"),b(n,"class","field"),this.first=n},m(e,a){i(e,n,a),c(n,l),c(l,o),c(n,r),c(n,s),c(s,p),k(p,t[0].network[t[37].symbol]),c(n,y),g||(v=m(p,"input",$),g=!0)},p(e,n){t=e,513&n[0]&&p.value!==t[0].network[t[37].symbol]&&k(p,t[0].network[t[37].symbol])},d(e){e&&a(n),g=!1,v()}}}function Oe(e){let t,n=[],l=new Map,o=e[10];const r=e=>e[37].symbol;for(let t=0;t<o.length;t+=1){let s=ye(e,o,t),c=r(s);l.set(c,n[t]=Te(c,s))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=p()},m(e,l){for(let t=0;t<n.length;t+=1)n[t].m(e,l);i(e,t,l)},p(e,s){1025&s[0]&&(o=e[10],n=L(n,s,r,1,e,o,l,t.parentNode,I,Te,t,ye))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&a(t)}}}function Te(t,n){let l,o,r,s,p,h,g,v,w,$=n[37].label+"",x=n[37].link&&function(t){let n,l,o,r,s,f=t[37].link.label+"";return{c(){n=d("("),l=u("a"),o=d(f),s=d(")"),b(l,"href",r=t[37].link.url),b(l,"target","_blank")},m(e,t){i(e,n,t),i(e,l,t),c(l,o),i(e,s,t)},p:e,d(e){e&&a(n),e&&a(l),e&&a(s)}}}(n),_="number"===n[37].type&&function(e){let t,n,l,o;function r(){e[21].call(t,e[37])}return{c(){t=u("input"),b(t,"class","input"),b(t,"type","number"),b(t,"placeholder",n=e[37].placeholder)},m(n,s){i(n,t,s),k(t,e[0].master[e[37].symbol]),l||(o=m(t,"input",r),l=!0)},p(n,l){e=n,1025&l[0]&&y(t.value)!==e[0].master[e[37].symbol]&&k(t,e[0].master[e[37].symbol])},d(e){e&&a(t),l=!1,o()}}}(n),S="checkbox"===n[37].type&&function(e){let t,n,l,o,r,s,p,h=e[37].label+"";function y(){return e[22](e[37])}return{c(){t=u("label"),n=u("input"),o=f(),r=d(h),b(n,"type","checkbox"),n.checked=l=e[0].master[e[37].symbol],b(t,"class","checkbox")},m(e,l){i(e,t,l),c(t,n),c(t,o),c(t,r),s||(p=m(n,"change",y),s=!0)},p(t,o){e=t,1&o[0]&&l!==(l=e[0].master[e[37].symbol])&&(n.checked=l)},d(e){e&&a(t),s=!1,p()}}}(n),M=!n[37].type&&function(e){let t,n,l,o;function r(){e[23].call(t,e[37])}return{c(){t=u("input"),b(t,"class","input"),b(t,"type","text"),b(t,"placeholder",n=e[37].placeholder)},m(n,s){i(n,t,s),k(t,e[0].master[e[37].symbol]),l||(o=m(t,"input",r),l=!0)},p(n,l){e=n,1025&l[0]&&t.value!==e[0].master[e[37].symbol]&&k(t,e[0].master[e[37].symbol])},d(e){e&&a(t),l=!1,o()}}}(n);return{key:t,first:null,c(){l=u("div"),o=u("p"),r=d($),s=f(),x&&x.c(),p=f(),h=u("div"),_&&_.c(),g=f(),S&&S.c(),v=f(),M&&M.c(),w=f(),b(o,"class","label"),b(h,"class","control"),b(l,"class","field"),this.first=l},m(e,t){i(e,l,t),c(l,o),c(o,r),c(o,s),x&&x.m(o,null),c(l,p),c(l,h),_&&_.m(h,null),c(h,g),S&&S.m(h,null),c(h,v),M&&M.m(h,null),c(l,w)},p(e,t){(n=e)[37].link&&x.p(n,t),"number"===n[37].type&&_.p(n,t),"checkbox"===n[37].type&&S.p(n,t),n[37].type||M.p(n,t)},d(e){e&&a(l),x&&x.d(),_&&_.d(),S&&S.d(),M&&M.d()}}}function Ie(e){let t,n,l,o,r,s,d=[],p=new Map,h=e[0].workers;const y=e=>e[34].id;for(let t=0;t<h.length;t+=1){let n=he(e,h,t),l=y(n);p.set(l,d[t]=De(l,n))}return{c(){t=u("div"),n=u("button"),n.innerHTML="<span>+</span>",l=f(),o=u("div");for(let e=0;e<d.length;e+=1)d[e].c();b(n,"type","button"),b(n,"class","button is-primary"),b(t,"class","actions"),v(t,"margin-bottom","20px"),b(o,"class","worker-container")},m(a,u){i(a,t,u),c(t,n),i(a,l,u),i(a,o,u);for(let e=0;e<d.length;e+=1)d[e].m(o,null);r||(s=m(n,"click",e[24]),r=!0)},p(e,t){1025&t[0]&&(h=e[0].workers,d=L(d,t,y,1,e,h,p,o,I,De,null,he))},d(e){e&&a(t),e&&a(l),e&&a(o);for(let e=0;e<d.length;e+=1)d[e].d();r=!1,s()}}}function Le(t,n){let l,o,r,s,p,h,g,v,w=n[37].label+"",$=n[37].link&&function(t){let n,l,o,r,s,f=t[37].link.label+"";return{c(){n=d("("),l=u("a"),o=d(f),s=d(")"),b(l,"href",r=t[37].link.url),b(l,"target","_blank")},m(e,t){i(e,n,t),i(e,l,t),c(l,o),i(e,s,t)},p:e,d(e){e&&a(n),e&&a(l),e&&a(s)}}}(n),x="number"===n[37].type&&function(e){let t,n,l,o;function r(){e[26].call(t,e[37],e[35],e[36])}return{c(){t=u("input"),b(t,"class","input"),b(t,"type","number"),b(t,"placeholder",n=e[37].placeholder)},m(n,s){i(n,t,s),k(t,e[34][e[37].symbol]),l||(o=m(t,"input",r),l=!0)},p(n,l){e=n,1025&l[0]&&y(t.value)!==e[34][e[37].symbol]&&k(t,e[34][e[37].symbol])},d(e){e&&a(t),l=!1,o()}}}(n),_="checkbox"===n[37].type&&function(e){let t,n,l,o,r,s,p,h=e[37].label+"";function y(){return e[27](e[34],e[37],e[35],e[36])}return{c(){t=u("label"),n=u("input"),o=f(),r=d(h),b(n,"type","checkbox"),n.checked=l=e[34][e[37].symbol],b(t,"class","checkbox")},m(e,l){i(e,t,l),c(t,n),c(t,o),c(t,r),s||(p=m(n,"change",y),s=!0)},p(t,o){e=t,1&o[0]&&l!==(l=e[34][e[37].symbol])&&(n.checked=l)},d(e){e&&a(t),s=!1,p()}}}(n),S=!n[37].type&&function(e){let t,n,l,o;function r(){e[28].call(t,e[37],e[35],e[36])}return{c(){t=u("input"),b(t,"class","input"),b(t,"type","text"),b(t,"placeholder",n=e[37].placeholder)},m(n,s){i(n,t,s),k(t,e[34][e[37].symbol]),l||(o=m(t,"input",r),l=!0)},p(n,l){e=n,1025&l[0]&&t.value!==e[34][e[37].symbol]&&k(t,e[34][e[37].symbol])},d(e){e&&a(t),l=!1,o()}}}(n);return{key:t,first:null,c(){l=u("div"),o=u("p"),r=d(w),s=f(),$&&$.c(),p=f(),h=u("div"),x&&x.c(),g=f(),_&&_.c(),v=f(),S&&S.c(),b(o,"class","label"),b(h,"class","control"),b(l,"class","field"),this.first=l},m(e,t){i(e,l,t),c(l,o),c(o,r),c(o,s),$&&$.m(o,null),c(l,p),c(l,h),x&&x.m(h,null),c(h,g),_&&_.m(h,null),c(h,v),S&&S.m(h,null)},p(e,t){(n=e)[37].link&&$.p(n,t),"number"===n[37].type&&x.p(n,t),"checkbox"===n[37].type&&_.p(n,t),n[37].type||S.p(n,t)},d(e){e&&a(l),$&&$.d(),x&&x.d(),_&&_.d(),S&&S.d()}}}function De(e,t){let n,l,o,r,s,p,h,y,k,v,w=t[34].name+"",$=[],x=new Map;function _(){return t[25](t[36])}let S=t[10];const M=e=>e[37].symbol;for(let e=0;e<S.length;e+=1){let n=be(t,S,e),l=M(n);x.set(l,$[e]=Le(l,n))}return{key:e,first:null,c(){n=u("div"),l=u("div"),o=u("p"),r=d(w),s=f(),p=u("button"),p.innerHTML="<span>-</span>",h=f();for(let e=0;e<$.length;e+=1)$[e].c();y=f(),b(o,"class","is-size-5 has-text-weight-bold"),b(p,"type","button"),b(p,"class","button is-danger"),b(l,"class","worker-header"),b(n,"class","box"),this.first=n},m(e,t){i(e,n,t),c(n,l),c(l,o),c(o,r),c(l,s),c(l,p),c(n,h);for(let e=0;e<$.length;e+=1)$[e].m(n,null);c(n,y),k||(v=m(p,"click",_),k=!0)},p(e,l){t=e,1&l[0]&&w!==(w=t[34].name+"")&&g(r,w),1025&l[0]&&(S=t[10],$=L($,l,M,1,t,S,x,n,I,Le,y,be))},d(e){e&&a(n);for(let e=0;e<$.length;e+=1)$[e].d();k=!1,v()}}}function He(t){let n;return{c(){n=d("Failed to deploy K8S.")},m(e,t){i(e,n,t)},p:e,d(e){e&&a(n)}}}function Ae(e){let t;return{c(){t=d(e[5])},m(e,n){i(e,t,n)},p(e,n){32&n[0]&&g(t,e[5])},d(e){e&&a(t)}}}function Be(t){let n;return{c(){n=d("> Loading...")},m(e,t){i(e,n,t)},p:e,d(e){e&&a(n)}}}function Fe(e){let t,n,l;return{c(){t=d("> "),n=d(e[5]),l=d(".")},m(e,o){i(e,t,o),i(e,n,o),i(e,l,o)},p(e,t){32&t[0]&&g(n,e[5])},d(e){e&&a(t),e&&a(n),e&&a(l)}}}function Ue(e){let t;return{c(){t=d("Deploy")},m(e,n){i(e,t,n)},d(e){e&&a(t)}}}function Ve(e){let t;return{c(){t=d("Back")},m(e,n){i(e,t,n)},d(e){e&&a(t)}}}function Ye(t){let n,o,r,s,d,p,y,g,k,w,$,x,_;function S(e,t){return e[2]?Se:e[3]?_e:e[4]?xe:$e}let M=S(t),C=M(t);function N(e,t){return e[3]||e[4]?Ve:Ue}let E=N(t),P=E(t);return{c(){n=u("div"),o=u("form"),r=u("h4"),r.textContent="Deploy a Kubernetes",s=f(),d=u("hr"),p=f(),C.c(),y=f(),g=u("div"),k=u("button"),P.c(),this.c=e,b(r,"class","is-size-4"),b(k,"class",w="button is-primary "+(t[2]?"is-loading":"")),b(k,"type","submit"),k.disabled=$=(t[2]||!t[0].valid)&&!(t[3]||t[4])||!t[7]||""===t[7].mnemonics||""===t[7].storeSecret,b(g,"class","actions"),b(o,"class","box"),v(n,"padding","15px")},m(e,l){i(e,n,l),c(n,o),c(o,r),c(o,s),c(o,d),c(o,p),C.m(o,null),c(o,y),c(o,g),c(g,k),P.m(k,null),x||(_=[m(k,"click",t[29]),m(o,"submit",h(t[13]))],x=!0)},p(e,t){M===(M=S(e))&&C?C.p(e,t):(C.d(1),C=M(e),C&&(C.c(),C.m(o,y))),E!==(E=N(e))&&(P.d(1),P=E(e),P&&(P.c(),P.m(k,null))),4&t[0]&&w!==(w="button is-primary "+(e[2]?"is-loading":""))&&b(k,"class",w),157&t[0]&&$!==($=(e[2]||!e[0].valid)&&!(e[3]||e[4])||!e[7]||""===e[7].mnemonics||""===e[7].storeSecret)&&(k.disabled=$)},i:e,o:e,d(e){e&&a(n),C.d(),P.d(),x=!1,l(_)}}}function Ge(e,t,n){let l,o,r;var c,i,a;const{events:u}=null!==(i=null===(c=window.configs)||void 0===c?void 0:c.grid3_client)&&void 0!==i?i:{},d=new le,f=[{label:"Name",symbol:"name",placeholder:"Your K8S Name"},{label:"Cluster Token",symbol:"secret",placeholder:"Your Cluster Token"},{label:"Public SSH Key",symbol:"sshKey",placeholder:"Your Public SSH Key"}],p=[{label:"Network Name",symbol:"name",placeholder:"Your Network Name"},{label:"Network IP Range",symbol:"ipRange",placeholder:"Your Network IP Range"}],m=[{label:"Name",symbol:"name",placeholder:"Enter name"},{label:"CPU",symbol:"cpu",placeholder:"CPU",type:"number"},{label:"Memory",symbol:"memory",placeholder:"Memory in MB",type:"number"},{label:"Disk Size",symbol:"diskSize",placeholder:"Disk size in GB",type:"number"},{label:"Public IP",symbol:"publicIp",placeholder:"",type:"checkbox"},{label:"Plantery Network",symbol:"plantery",placeholder:"",type:"checkbox"},{label:"Node ID",symbol:"node",placeholder:"Node ID",type:"number",link:{label:"Grid Explorer",url:"https://explorer.tfchain.dev.threefold.io/nodes"}}];let h="Config",b=!1,g=!1,k=!1;const v=null===(a=window.configs)||void 0===a?void 0:a.baseConfig;s(e,v,(e=>n(16,r=e)));let w,$=0;return e.$$.update=()=>{65536&e.$$.dirty[0]&&n(6,l=r),98304&e.$$.dirty[0]&&n(7,o=r[$])},[d,h,b,g,k,w,l,o,f,p,m,[{label:"Config"},{label:"Master"},{label:"Workers"}],v,function(){function e(e){"string"==typeof e&&n(5,w=e)}n(2,b=!0),n(3,g=!1),n(4,k=!1),n(5,w=void 0),u.addListener("logs",e),pe(d,o).then((()=>n(3,g=!0))).catch((e=>{n(4,k=!0),n(5,w=e.message)})).finally((()=>{n(2,b=!1),u.removeListener("logs",e)}))},e=>n(15,$=e.target.selectedIndex),$,r,e=>n(1,h=e.label),function(e){d[e.symbol]=this.value,n(0,d),n(8,f)},function(e){d[e.symbol]=this.value,n(0,d),n(8,f)},function(e){d.network[e.symbol]=this.value,n(0,d),n(9,p)},function(e){d.master[e.symbol]=y(this.value),n(0,d),n(10,m)},e=>n(0,d.master[e.symbol]=!d.master[e.symbol],d),function(e){d.master[e.symbol]=this.value,n(0,d),n(10,m)},()=>n(0,d.workers=[...d.workers,new te],d),e=>n(0,d.workers=d.workers.filter(((t,n)=>e!==n)),d),function(e,t,l){t[l][e.symbol]=y(this.value),n(0,d),n(10,m)},(e,t,l,o)=>n(0,l[o][t.symbol]=!e[t.symbol],d),function(e,t,l){t[l][e.symbol]=this.value,n(0,d),n(10,m)},e=>{(g||k)&&(e.preventDefault(),n(3,g=!1),n(4,k=!1),n(2,b=!1))}]}!function(e,t){try{customElements.define(`tf-${e}`,t)}catch(t){console.warn(`Element with name '${e}' already defined.`)}}("kubernetes",class extends A{constructor(e){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");.worker-container{overflow-x:hidden;overflow-y:auto;max-height:70vh;will-change:transform;padding-bottom:5rem;margin-bottom:20px}.actions,.worker-header{display:flex;justify-content:flex-end;align-items:center}.worker-header{justify-content:space-between}</style>',H(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Ge,Ye,r,{},null,[-1,-1]),e&&e.target&&i(e.target,this,e.anchor)}})}();
